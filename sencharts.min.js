var $enCharts={options:{ptChart:5,pbChart:5,plChart:3,prChart:3,mbChartTitle:10,mAxisTitle:5},s:function(t){let e=Math.pow(10,Math.floor(Math.log(t)/Math.log(10))),i=100*e,s=0,h=100;return[1,2,5].forEach(r=>{let l=Math.abs(t-r*e);l<i&&(i=l,s=r*e),r<h&&(h=r)}),Math.abs(t-10*h*e)<Math.abs(t-s)&&(s=10*h*e),s},m:function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,h=0;h<t;h++)e+=i.charAt(Math.floor(Math.random()*s));return e},Point:class{x;y;constructor(t,e){this.x=t,this.y=e}},TextStyle:class{color="black";fontSize=10;fontWeight="normal";fontFamily='system-ui, "Segoe UI", Roboto, "Helvetica Neue", sans-serif"'},LineStyle:class{stroke="black";strokeWidth=1;strokeDashArray="none"},RectStyle:class{cornerRadius=0;stroke="black";strokeWidth=1;strokeDashArray="none";fill="none"},Tick:class{text=t=>t;nbTicks=5;placement="auto";#a=new $enCharts.TextStyle;get style(){return this.#a}set style(t){t.color&&(this.#a.color=t.color),(t.fontSize||0===t.fontSize)&&(this.#a.fontSize=t.fontSize),t.fontWeight&&(this.#a.fontWeight=t.fontWeight),t.fontFamily&&(this.#a.fontFamily=t.fontFamily)}},Title:class{#a=new $enCharts.TextStyle;text="";constructor(){this.#a.fontSize=12}get style(){return this.#a}set style(t){t.color&&(this.#a.color=t.color),t.fontSize&&(this.#a.fontSize=t.fontSize),t.fontWeight&&(this.#a.fontWeight=t.fontWeight),t.fontFamily&&(this.#a.fontFamily=t.fontFamily)}},Legend:class{#b=new $enCharts.TextStyle;#c=new $enCharts.RectStyle;position="";constructor(){this.#b.fontSize=12,this.#c.stroke="transparent"}get textStyle(){return this.#b}set textStyle(t){t.color&&(this.#b.color=t.color),t.fontSize&&(this.#b.fontSize=t.fontSize),t.fontWeight&&(this.#b.fontWeight=t.fontWeight),t.fontFamily&&(this.#b.fontFamily=t.fontFamily)}get rectStyle(){return this.#c}set rectStyle(t){(t.cornerRadius||0===t.cornerRadius)&&(this.#c.cornerRadius=t.cornerRadius),t.fill&&(this.#c.fill=t.fill),t.stroke&&(this.#c.stroke=t.stroke),t.strokeWidth&&(this.#c.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#c.strokeDashArray=t.strokeDashArray)}},Grid:class{#a=new $enCharts.LineStyle;visible=!0;constructor(){this.#a.strokeDashArray="1 3"}get style(){return this.#a}set style(t){t.stroke&&(this.#a.stroke=t.stroke),t.strokeWidth&&(this.#a.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#a.strokeDashArray=t.strokeDashArray)}},Spy:class{#d=new $enCharts.LineStyle;#b=new $enCharts.TextStyle;#c=new $enCharts.RectStyle;visible=!0;constructor(){this.#c.fill="black",this.#b.color="white"}get lineStyle(){return this.#d}set lineStyle(t){t.stroke&&(this.#d.stroke=t.stroke),t.strokeWidth&&(this.#d.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#d.strokeDashArray=t.strokeDashArray)}get textStyle(){return this.#b}set textStyle(t){t.color&&(this.#b.color=t.color),t.fontSize&&(this.#b.fontSize=t.fontSize),t.fontWeight&&(this.#b.fontWeight=t.fontWeight),t.fontFamily&&(this.#b.fontFamily=t.fontFamily)}get rectStyle(){return this.#c}set rectStyle(t){(t.cornerRadius||0===t.cornerRadius)&&(this.#c.cornerRadius=t.cornerRadius),t.fill&&(this.#c.fill=t.fill),t.stroke&&(this.#c.stroke=t.stroke),t.strokeWidth&&(this.#c.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#c.strokeDashArray=t.strokeDashArray)}},Axis:class{#e=new $enCharts.Tick;#f=new $enCharts.Grid;#g=new $enCharts.Title;#h=new $enCharts.Spy;visible=!0;#a=new $enCharts.LineStyle;get tick(){return this.#e}set tick(t){(t.nbTicks||0===t.nbTicks)&&(this.#e.nbTicks=t.nbTicks),t.placement&&(this.#e.placement=t.placement),t.style&&(this.#e.style=t.style),t.text&&(this.#e.text=t.text)}get grid(){return this.#f}set grid(t){!0==t.visible&&(this.#f.visible=!0),!1==t.visible&&(this.#f.visible=!1),t.style&&(this.#f.style=t.style)}get title(){return this.#g}set title(t){t.text&&(this.#g.text=t.text),t.style&&(this.#g.style=t.style)}get spy(){return this.#h}set spy(t){t.lineStyle&&(this.#h.lineStyle=t.lineStyle),t.rectStyle&&(this.#h.rectStyle=t.rectStyle),t.textStyle&&(this.#h.textStyle=t.textStyle),!0==t.visible&&(this.#h.visible=!0),!1==t.visible&&(this.#h.visible=!1)}get style(){return this.#a}set style(t){t.stroke&&(this.#a.stroke=t.stroke),t.strokeWidth&&(this.#a.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#a.strokeDashArray=t.strokeDashArray)}},Interactivity:class{#i=new $enCharts.RectStyle;panningSpeed=2;constructor(){this.#i.strokeDashArray="2 2"}get zoomRect(){return this.#i}set zoomRect(t){t.cornerRadius&&(this.#i.cornerRadius=t.cornerRadius),t.fill&&(this.#i.fill=t.fill),t.stroke&&(this.#i.stroke=t.stroke),t.strokeWidth&&(this.#i.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#i.strokeDashArray=t.strokeDashArray)}},Layout:class{#j=new $enCharts.Axis;#k=new $enCharts.Axis;#g=new $enCharts.Title;#l=new $enCharts.Legend;constructor(){this.#k.tick.text=t=>t.toFixed(2)}get xAxis(){return this.#j}set xAxis(t){t.grid&&(this.#j.grid=t.grid),t.spy&&(this.#j.spy=t.spy),t.style&&(this.#j.style=t.style),t.tick&&(this.#j.tick=t.tick),t.title&&(this.#j.title=t.title),!0==t.visible&&(this.#j.visible=!0),!1==t.visible&&(this.#j.visible=!1)}get yAxis(){return this.#k}set yAxis(t){t.grid&&(this.#k.grid=t.grid),t.spy&&(this.#k.spy=t.spy),t.style&&(this.#k.style=t.style),t.tick&&(this.#k.tick=t.tick),t.title&&(this.#k.title=t.title),!0==t.visible&&(this.#k.visible=!0),!1==t.visible&&(this.#k.visible=!1)}get title(){return this.#g}set title(t){t.text&&(this.#g.text=t.text),t.style&&(this.#g.style=t.style)}get legend(){return this.#l}set legend(t){t.position&&(this.#l.position=t.position),t.textStyle&&(this.#l.textStyle=t.textStyle),t.rectStyle&&(this.#l.rectStyle=t.rectStyle)}},DataSeries:class{name="";#a=new $enCharts.LineStyle;data=[];constructor(t){this.name=t,this.#a.strokeWidth=2}get style(){return this.#a}set style(t){t.stroke&&(this.#a.stroke=t.stroke),t.strokeWidth&&(this.#a.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#a.strokeDashArray=t.strokeDashArray)}},BarDataSeries:class{name="";#a=new $enCharts.RectStyle;data=[];constructor(t){this.name=t}get style(){return this.#a}set style(t){t.stroke&&(this.#a.stroke=t.stroke),t.strokeWidth&&(this.#a.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#a.strokeDashArray=t.strokeDashArray),t.fill&&(this.#a.fill=t.fill),(t.cornerRadius||0===t.cornerRadius)&&(this.#a.cornerRadius=t.cornerRadius)}}};class LineChart{#m=class{x=[];#n=[];get y(){return this.#n}set y(t){t&&t.length&&(this.#n.length=0,t.forEach(t=>{let e=new $enCharts.DataSeries(t.name);e.data=t.data,t.style&&(e.style=t.style),this.#n.push(e)}))}};#o=new this.#m;set data(t){t.x&&(this.#o.x=t.x),t.y&&(this.#o.y=t.y)}#p=new $enCharts.Layout;get layout(){return this.#p}set layout(t){t.legend&&(this.#p.legend=t.legend),t.title&&(this.#p.title=t.title),t.xAxis&&(this.#p.xAxis=t.xAxis),t.yAxis&&(this.#p.yAxis=t.yAxis)}#q=new $enCharts.Interactivity;get interactivity(){return this.#q}set interactivity(t){if(t.panningSpeed){let e=parseInt(t.panningSpeed);isNaN(e)||(e>5&&(e=5),e<1&&(e=1),this.#q.panningSpeed=e)}t.zoomRect&&(this.#q.zoomRect=t.zoomRect)}#r="transparent";get backgroundColor(){return this.#r}set backgroundColor(t){this.#r=t,this.#s.style.backgroundColor=t}#t=[];#s=document.createElementNS("http://www.w3.org/2000/svg","svg");#u;#v=$enCharts.m(6);#w;#x;#y;#z;#A;#B;#i;#C;#D;#E=100;#F=100;#G;#H;#I;#J=15;#K=.025;#L=10;#M=5;#N=20;#O=5;#P=2;#Q;#R;#S;#T;#U;#V;#W=!1;#X;#Y;#Z;#$;#_=!1;#aa=!1;#ab=0;#ac=0;constructor(t){this.#s.setAttribute("height","100%"),this.#s.setAttribute("width","100%"),this.#s.style["user-select"]="none",t.appendChild(this.#s),window.addEventListener("resize",t=>{let e=this.#s.getBoundingClientRect();this.#u&&(e.width!==this.#u.width||e.height!==this.#u.height)&&this.plot(this.#S,this.#T,this.#U,this.#V)}),this.#s.onmouseleave=t=>{this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.onmousedown=t=>{if(0==t.button){let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;i!=this.#ab||s!=this.#ac?(this.#_=!0,this.#aa=!1):(this.#aa=!0,this.#_=!1),i<this.#I?this.#ab=this.#I:i>this.#I+this.#C?this.#ab=this.#I+this.#C:this.#ab=i,s<this.#G?this.#ac=this.#G:s>this.#G+this.#D?this.#ac=this.#G+this.#D:this.#ac=s}},this.#s.onmouseup=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;if(this.#_){if(this.#_=!1,this.#t.findIndex(t=>t.nx>=i)!=this.#t.findIndex(t=>t.nx>=this.#ab)){let h=(i-this.#I)*(this.#T-this.#S)/this.#C+this.#S,r=(this.#ab-this.#I)*(this.#T-this.#S)/this.#C+this.#S,l=(this.#D-(s-this.#G))*(this.#V-this.#U)/this.#D+this.#U,a=(this.#D-(this.#ac-this.#G))*(this.#V-this.#U)/this.#D+this.#U;h>r?l>a?this.plot(r,h,a,l):l<a&&this.plot(r,h,l,a):h<r&&(l>a?this.plot(h,r,a,l):l<a&&this.plot(h,r,l,a))}this.#i.removeAttribute("x"),this.#i.removeAttribute("y"),this.#i.removeAttribute("width"),this.#i.removeAttribute("height")}this.#aa&&(this.#aa=!1)},this.#s.onmousemove=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;if(i>=this.#I&&i<=this.#C+this.#I&&s>=this.#G&&s<=this.#D+this.#G){if(this.layout.xAxis.spy.visible&&this.#t.length>0){let h=this.#t.findIndex(t=>t.nx>i);-1==h&&(h=this.#t.length-1),0==h&&(h=1);let r=1==this.#t.length?this.#t[0]:i>(this.#t[h].nx+this.#t[h-1].nx)/2?this.#t[h]:this.#t[h-1];this.#w.setAttribute("y1",this.#D+this.#G),this.#w.setAttribute("y2",this.#G),this.#w.setAttribute("x1",r.nx),this.#w.setAttribute("x2",r.nx),this.#y.setAttribute("x",r.nx),this.#y.textContent=this.layout.xAxis.tick.text(r.x);let l=this.#y.getBoundingClientRect();this.#A.setAttribute("x",l.left-e.left),this.#A.setAttribute("y",l.top-e.top),this.#A.setAttribute("width",l.width),this.#A.setAttribute("height",l.height)}if(this.layout.yAxis.spy.visible){this.#x.setAttribute("x1",this.#I),this.#x.setAttribute("y1",s),this.#x.setAttribute("x2",this.#I+this.#C),this.#x.setAttribute("y2",s);let a=(this.#D-(s-this.#G))*(this.#V-this.#U)/this.#D+this.#U;this.#z.setAttribute("y",s+this.layout.yAxis.tick.style.fontSize/2),this.#z.textContent=this.layout.yAxis.tick.text(a);let o=this.#z.getBoundingClientRect();this.#B.setAttribute("x",o.left-e.left),this.#B.setAttribute("y",o.top-e.top),this.#B.setAttribute("width",o.width),this.#B.setAttribute("height",o.height)}if(this.#_&&(i>this.#ab?(this.#i.setAttribute("x",this.#ab),this.#i.setAttribute("width",i-this.#ab)):(this.#i.setAttribute("x",i),this.#i.setAttribute("width",this.#ab-i)),s>this.#ac?(this.#i.setAttribute("y",this.#ac),this.#i.setAttribute("height",s-this.#ac)):(this.#i.setAttribute("y",s),this.#i.setAttribute("height",this.#ac-s))),this.#aa){let y=Math.abs(i-this.#ab)*(this.#T-this.#S)/this.#C*this.interactivity.panningSpeed/10,n=Math.abs(s-this.#ac)*(this.#V-this.#U)/this.#D*this.interactivity.panningSpeed/10;if(i>this.#ab){let x=this.#S-y,u=this.#T-y;if(s>this.#ac){let d=this.#U+n,A=this.#V+n;this.plot(x,u,d,A)}else{let g=this.#U-n,b=this.#V-n;this.plot(x,u,g,b)}}else{let c=this.#S+y,f=this.#T+y;if(s>this.#ac){let p=this.#U+n,w=this.#V+n;this.plot(c,f,p,w)}else{let S=this.#U-n,k=this.#V-n;this.plot(c,f,S,k)}}}}else this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.ondblclick=t=>{this.plot(this.#X,this.#Y,this.#Z,this.#$)}}plot(t,e,i,s){if(e<=t||0==this.#o.x.length||t<this.#o.x[0]||e>this.#o.x[this.#o.x.length-1])return;this.#S=this.#o.x[0],this.#T=this.#o.x[this.#o.x.length-1],arguments.length>=1&&(this.#S=t),arguments.length>=2&&(this.#T=e),this.#t=[];let h=this.#o.x.findIndex(t=>t>=this.#S);if(this.#T==this.#o.x[this.#o.x.length-1])this.#o.x.slice(h).forEach(t=>{this.#t.push({x:t})});else{let r=this.#o.x.findIndex(t=>t>this.#T);this.#o.x.slice(h,r).forEach(t=>{this.#t.push({x:t})})}if(arguments.length<4){let l=this.#o.y[0].data.slice(h,h+this.#t.length).reduce((t,e)=>t>e?t:e);this.#V=l>0?l*(1+this.#K):l*(1-this.#K),this.#o.y.slice(1).forEach(t=>{let e=t.data.slice(h,h+this.#t.length).reduce((t,e)=>t>e?t:e),i=e>0?e*(1+this.#K):e*(1-this.#K);i>this.#V&&(this.#V=i)})}if(arguments.length<3){let a=this.#o.y[0].data.slice(h,h+this.#t.length).reduce((t,e)=>t<e?t:e);this.#U=a>0?a*(1-this.#K):a*(1+this.#K),this.#o.y.slice(1).forEach(t=>{let e=t.data.slice(h,h+this.#t.length).reduce((t,e)=>t<e?t:e),i=e>0?e*(1-this.#K):e*(1+this.#K);i<this.#U&&(this.#U=i)})}arguments.length>=3&&(this.#U=i),arguments.length>=4&&(this.#V=s);let o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),o.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),o.textContent=this.layout.yAxis.tick.text(this.#V),this.#s.appendChild(o);let y=o.getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),n.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),n.textContent=this.layout.yAxis.tick.text(this.#U),this.#s.appendChild(n);let x=n.getBBox();this.#Q=y.width>x.width?y.width:x.width;let u=document.createElementNS("http://www.w3.org/2000/svg","text");u.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),u.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),u.textContent=this.layout.xAxis.tick.text(this.#o.x[this.#o.x.length-1]),this.#s.appendChild(u),this.#R=u.getBBox().width,this.#W||(this.#W=!0,this.#X=this.#S,this.#Y=this.#T,this.#Z=this.#U,this.#$=this.#V),this.#s.innerHTML="",this.#G=$enCharts.options.ptChart,this.layout.title.text&&(this.#G+=this.layout.title.style.fontSize+$enCharts.options.mbChartTitle),this.#I=this.#O+this.#P+this.#Q+$enCharts.options.plChart,this.layout.yAxis.title.text&&(this.#I+=this.layout.yAxis.title.style.fontSize+$enCharts.options.mAxisTitle),this.#H=this.#O+this.#P+this.layout.xAxis.tick.style.fontSize+$enCharts.options.pbChart,this.layout.xAxis.title.text&&(this.#H+=this.layout.xAxis.title.style.fontSize+$enCharts.options.mAxisTitle),this.#J=$enCharts.options.prChart+this.#R/2;let d=this.#s.getBoundingClientRect();this.#u={height:d.height,width:d.width},this.#C=d.width-this.#I-this.#J,this.#D=d.height-this.#G-this.#H;let A=document.createElementNS("http://www.w3.org/2000/svg","clipPath");A.setAttribute("id",this.#v),this.#s.appendChild(A);let g=document.createElementNS("http://www.w3.org/2000/svg","rect");if(g.setAttribute("x",this.#I),g.setAttribute("y",this.#G),g.setAttribute("width",this.#C),g.setAttribute("height",this.#D),g.setAttribute("stroke","transparent"),g.setAttribute("fill","none"),A.appendChild(g),this.#i=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#i.setAttribute("stroke",this.interactivity.zoomRect.stroke),this.#i.setAttribute("fill",this.interactivity.zoomRect.fill),this.#i.setAttribute("stroke-width",this.interactivity.zoomRect.strokeWidth),this.#i.setAttribute("stroke-dasharray",this.interactivity.zoomRect.strokeDashArray),this.#i.setAttribute("width",0),this.#i.setAttribute("height",0),this.#i.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#i),this.layout.xAxis.visible){let b=document.createElementNS("http://www.w3.org/2000/svg","line");b.setAttribute("stroke",this.layout.xAxis.style.stroke),b.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),b.setAttribute("shape-rendering","crispEdges"),b.setAttribute("x1",this.#I),b.setAttribute("y1",this.#G+this.#D),b.setAttribute("x2",this.#I+this.#C),b.setAttribute("y2",this.#G+this.#D),this.#s.appendChild(b)}if(this.layout.yAxis.visible){let c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("stroke",this.layout.yAxis.style.stroke),c.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),c.setAttribute("shape-rendering","crispEdges"),c.setAttribute("x1",this.#I),c.setAttribute("y1",this.#G),c.setAttribute("x2",this.#I),c.setAttribute("y2",this.#G+this.#D),this.#s.appendChild(c)}let f;if("auto"==this.layout.xAxis.tick.placement.toLowerCase()||this.layout.xAxis.tick.nbTicks<=1){let p=this.#C/(this.#T-this.#S),w=this.#E/p;f=$enCharts.s(w);let S=Math.ceil(this.#S/f),k=Math.floor(this.#T/f);for(let m=S;m<=k;m++)this.#ad(m*f)}else{f=(this.#T-this.#S)/(this.layout.xAxis.tick.nbTicks-1);for(let $=0;$<this.layout.xAxis.tick.nbTicks;$++)this.#ad(this.#S+$*f)}this.#w=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#w.setAttribute("stroke",this.layout.xAxis.spy.lineStyle.stroke),this.#w.setAttribute("stroke-width",1),this.#w.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#w),this.#A=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#A.setAttribute("stroke",this.layout.xAxis.spy.rectStyle.stroke),this.#A.setAttribute("fill",this.layout.xAxis.spy.rectStyle.fill),this.#A.setAttribute("rx",this.layout.xAxis.spy.rectStyle.cornerRadius),this.#A.setAttribute("shape-rendering","geometricPrecision"),this.#A.setAttribute("width",0),this.#A.setAttribute("height",0),this.#s.appendChild(this.#A),this.#y=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#y.setAttribute("fill",this.layout.xAxis.spy.textStyle.color),this.#y.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),this.#y.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),this.#y.setAttribute("text-anchor","middle"),this.#y.setAttribute("y",this.#G+this.#D+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize),this.#s.appendChild(this.#y);let v;if("auto"==this.layout.yAxis.tick.placement.toLowerCase()||this.layout.yAxis.tick.nbTicks<=1){let C=this.#D/(this.#V-this.#U),z=this.#F/C;v=$enCharts.s(z);let M=Math.ceil(this.#U/v),_=Math.floor(this.#V/v);for(let L=M;L<=_;L++)this.#ae(L*v)}else{v=(this.#V-this.#U)/(this.layout.yAxis.tick.nbTicks-1);for(let O=0;O<this.layout.yAxis.tick.nbTicks;O++)this.#ae(this.#U+O*v)}if(this.#x=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#x.setAttribute("stroke",this.layout.yAxis.spy.lineStyle.stroke),this.#x.setAttribute("stroke-width",1),this.#x.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#x),this.#B=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#B.setAttribute("stroke",this.layout.yAxis.spy.rectStyle.stroke),this.#B.setAttribute("fill",this.layout.yAxis.spy.rectStyle.fill),this.#B.setAttribute("rx",this.layout.yAxis.spy.rectStyle.cornerRadius),this.#B.setAttribute("shape-rendering","geometricPrecision"),this.#B.setAttribute("width",0),this.#B.setAttribute("height",0),this.#s.appendChild(this.#B),this.#z=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#z.setAttribute("fill",this.layout.yAxis.spy.textStyle.color),this.#z.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),this.#z.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),this.#z.setAttribute("text-anchor","end"),this.#z.setAttribute("x",this.#I-this.#O-this.#P),this.#s.appendChild(this.#z),this.#o.y.forEach(t=>{let e="";for(let i=0;i<this.#t.length;i++){let s=this.#af(this.#t[i].x),r=this.#ag(t.data[i+h]);this.#t[i].nx=s,e+=s+","+r+" "}let l=document.createElementNS("http://www.w3.org/2000/svg","polyline");l.setAttribute("points",e.trim()),l.setAttribute("fill","none"),l.setAttribute("stroke",t.style.stroke),l.setAttribute("stroke-dasharray",t.style.strokeDashArray),l.setAttribute("stroke-width",t.style.strokeWidth),l.setAttribute("stroke-linejoin","round"),l.setAttribute("shape-rendering","geometricPrecision"),l.setAttribute("clip-path","url(#"+this.#v+")"),this.#s.appendChild(l)}),this.#o.y.length>0&&this.layout.legend.position){let R=document.createElementNS("http://www.w3.org/2000/svg","svg"),E=document.createElementNS("http://www.w3.org/2000/svg","rect");E.setAttribute("stroke",this.layout.legend.rectStyle.stroke),E.setAttribute("stroke-width",this.layout.legend.rectStyle.strokeWidth),E.setAttribute("stroke-dasharray",this.layout.legend.rectStyle.strokeDashArray),E.setAttribute("fill",this.layout.legend.rectStyle.fill),E.setAttribute("rx",this.layout.legend.rectStyle.cornerRadius),R.appendChild(E);let W=0;this.#o.y.forEach((t,e)=>{t.name||(t.name="Series "+(e+1));let i=document.createElementNS("http://www.w3.org/2000/svg","line"),s=this.#M+this.layout.legend.textStyle.fontSize/2+W*(this.layout.legend.textStyle.fontSize+this.#M);i.setAttribute("x1",this.layout.legend.rectStyle.strokeWidth+this.#M),i.setAttribute("x2",this.layout.legend.rectStyle.strokeWidth+this.#M+this.#N),i.setAttribute("y1",s),i.setAttribute("y2",s),i.setAttribute("stroke",t.style.stroke),i.setAttribute("stroke-dasharray",t.style.strokeDashArray),i.setAttribute("stroke-width",t.style.strokeWidth),R.appendChild(i);let h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("font-size",this.layout.legend.textStyle.fontSize),h.setAttribute("font-family",this.layout.legend.textStyle.fontFamily),h.setAttribute("font-weight",this.layout.legend.textStyle.fontWeight),h.setAttribute("fill",this.layout.legend.textStyle.color),h.setAttribute("x",this.layout.legend.rectStyle.strokeWidth+2*this.#M+this.#N),h.setAttribute("y",s+this.layout.legend.textStyle.fontSize/2),h.setAttribute("text-anchor","start"),h.textContent=t.name,R.appendChild(h),W++}),this.#s.appendChild(R);let N=R.getBBox();R.setAttribute("width",N.width+this.layout.legend.rectStyle.strokeWidth+3*this.#M+"px"),R.setAttribute("height",N.height+this.layout.legend.rectStyle.strokeWidth+this.#M+"px"),E.setAttribute("x",this.layout.legend.rectStyle.strokeWidth/2),E.setAttribute("y",this.layout.legend.rectStyle.strokeWidth/2),E.setAttribute("height",N.height+this.#M),E.setAttribute("width",N.width+3*this.#M);let H=R.getBoundingClientRect();switch(this.layout.legend.position.toLowerCase()){case"east":R.setAttribute("x",this.#I+this.#C-this.#L-H.width),R.setAttribute("y",this.#G+(this.#D-H.height)/2);break;case"west":R.setAttribute("x",this.#I+this.#L),R.setAttribute("y",this.#G+(this.#D-H.height)/2);break;case"north":R.setAttribute("x",this.#I+(this.#C-H.width)/2),R.setAttribute("y",this.#G+this.#L);break;case"northeast":R.setAttribute("x",this.#I+this.#C-this.#L-H.width),R.setAttribute("y",this.#G+this.#L);break;case"northwest":R.setAttribute("x",this.#I+this.#L),R.setAttribute("y",this.#G+this.#L);break;case"southeast":R.setAttribute("x",this.#I+this.#C-this.#L-H.width),R.setAttribute("y",this.#G+this.#D-this.#L-H.height);break;case"southwest":R.setAttribute("x",this.#I+this.#L),R.setAttribute("y",this.#G+this.#D-this.#L-H.height);break;default:R.setAttribute("x",this.#I+(this.#C-H.width)/2),R.setAttribute("y",this.#G+this.#D-this.#L-H.height)}}if(this.layout.title.text){let T=document.createElementNS("http://www.w3.org/2000/svg","text");T.setAttribute("font-size",this.layout.title.style.fontSize),T.setAttribute("font-family",this.layout.title.style.fontFamily),T.setAttribute("font-weight",this.layout.title.style.fontWeight),T.setAttribute("fill",this.layout.title.style.color),T.setAttribute("x",this.#I+this.#C/2),T.setAttribute("y",this.layout.title.style.fontSize+$enCharts.options.ptChart),T.setAttribute("text-anchor","middle"),T.textContent=this.layout.title.text,this.#s.appendChild(T)}if(this.layout.xAxis.title.text){let X=document.createElementNS("http://www.w3.org/2000/svg","text");X.setAttribute("font-size",this.layout.xAxis.title.style.fontSize),X.setAttribute("font-family",this.layout.xAxis.title.style.fontFamily),X.setAttribute("font-weight",this.layout.xAxis.title.style.fontWeight),X.setAttribute("fill",this.layout.xAxis.title.style.color),X.setAttribute("x",this.#I+this.#C/2),X.setAttribute("y",this.#G+this.#D+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize+$enCharts.options.mAxisTitle+this.layout.xAxis.title.style.fontSize),X.setAttribute("text-anchor","middle"),X.textContent=this.layout.xAxis.title.text,this.#s.appendChild(X)}if(this.layout.yAxis.title.text){let P=document.createElementNS("http://www.w3.org/2000/svg","text");P.setAttribute("font-size",this.layout.yAxis.title.style.fontSize),P.setAttribute("font-family",this.layout.yAxis.title.style.fontFamily),P.setAttribute("font-weight",this.layout.yAxis.title.style.fontWeight),P.setAttribute("fill",this.layout.yAxis.title.style.color),P.setAttribute("text-anchor","start"),P.textContent=this.layout.yAxis.title.text,this.#s.appendChild(P);let D=P.getBoundingClientRect(),Y=this.#I-this.#O-this.#P-this.#Q-$enCharts.options.mAxisTitle,B=this.#G+this.#D/2+D.width/2;P.setAttribute("x",Y),P.setAttribute("y",B),P.setAttribute("transform","rotate(-90,"+Y+","+B+")")}}#ah(t,e){return new $enCharts.Point((t-this.#S)*this.#C/(this.#T-this.#S)+this.#I,this.#D-(e-this.#U)*this.#D/(this.#V-this.#U)+this.#G)}#af(i){return(i-this.#S)*this.#C/(this.#T-this.#S)+this.#I}#ag(s){return this.#D-(s-this.#U)*this.#D/(this.#V-this.#U)+this.#G}#ad(h){let r=this.#ah(h,this.#U),l=this.#ah(h,this.#V);if(this.layout.xAxis.visible){let a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("stroke",this.layout.xAxis.style.stroke),a.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),a.setAttribute("x1",r.x),a.setAttribute("y1",r.y),a.setAttribute("x2",r.x),a.setAttribute("y2",r.y+this.#O),a.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(a)}let o=document.createElementNS("http://www.w3.org/2000/svg","text");if(o.setAttribute("fill",this.layout.xAxis.tick.style.color),o.setAttribute("x",r.x),o.setAttribute("y",r.y+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),o.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),o.textContent=this.layout.xAxis.tick.text(h),this.#s.appendChild(o),this.layout.xAxis.grid.visible&&h!=this.#S&&h!=this.#T){let y=document.createElementNS("http://www.w3.org/2000/svg","line");y.setAttribute("stroke",this.layout.xAxis.grid.style.stroke),y.setAttribute("stroke-width",this.layout.xAxis.grid.style.strokeWidth),y.setAttribute("stroke-dasharray",this.layout.xAxis.grid.style.strokeDashArray),y.setAttribute("x1",r.x),y.setAttribute("y1",r.y),y.setAttribute("x2",l.x),y.setAttribute("y2",l.y),y.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(y)}}#ae(n){let x=this.#ah(this.#S,n),u=this.#ah(this.#T,n);if(this.layout.yAxis.visible){let d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("stroke",this.layout.yAxis.style.stroke),d.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),d.setAttribute("x1",x.x),d.setAttribute("y1",x.y),d.setAttribute("x2",x.x-this.#O),d.setAttribute("y2",x.y),d.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(d)}let A=document.createElementNS("http://www.w3.org/2000/svg","text");if(A.setAttribute("fill",this.layout.yAxis.tick.style.color),A.setAttribute("x",x.x-this.#O-this.#P),A.setAttribute("y",x.y+this.layout.yAxis.tick.style.fontSize/2),A.setAttribute("text-anchor","end"),A.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),A.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),A.textContent=this.layout.yAxis.tick.text(n),this.#s.appendChild(A),this.layout.yAxis.grid.visible&&n!=this.#U&&n!=this.#V){let g=document.createElementNS("http://www.w3.org/2000/svg","line");g.setAttribute("stroke",this.layout.yAxis.grid.style.stroke),g.setAttribute("stroke-width",this.layout.yAxis.grid.style.strokeWidth),g.setAttribute("stroke-dasharray",this.layout.yAxis.grid.style.strokeDashArray),g.setAttribute("x1",x.x),g.setAttribute("y1",x.y),g.setAttribute("x2",u.x),g.setAttribute("y2",u.y),g.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(g)}}}class StockChart{data=[];#p=new $enCharts.Layout;get layout(){return this.#p}set layout(t){t.title&&(this.#p.title=t.title),t.xAxis&&(this.#p.xAxis=t.xAxis),t.yAxis&&(this.#p.yAxis=t.yAxis)}#q=new $enCharts.Interactivity;get interactivity(){return this.#q}set interactivity(t){if(t.panningSpeed){let e=parseInt(t.panningSpeed);isNaN(e)||(e>5&&(e=5),e<1&&(e=1),this.#q.panningSpeed=e)}t.zoomRect&&(this.#q.zoomRect=t.zoomRect)}#r="transparent";get backgroundColor(){return this.#r}set backgroundColor(t){this.#r=t,this.#s.style.backgroundColor=t}chartType="line";#t=[];#s=document.createElementNS("http://www.w3.org/2000/svg","svg");#u;#w;#x;#y;#z;#A;#B;#i;#C;#D;#E=100;#F=100;#G;#H;#I;#J;#K=.025;#O=5;#P=2;#Q;#R;#S;#T;#U;#V;#W=!1;#X;#Y;#_=!1;#aa=!1;#ab=0;#ac=0;constructor(t){this.#s.setAttribute("height","100%"),this.#s.setAttribute("width","100%"),this.#s.style["user-select"]="none",t.appendChild(this.#s),window.addEventListener("resize",t=>{let e=this.#s.getBoundingClientRect();this.#u&&(e.width!==this.#u.width||e.height!==this.#u.height)&&this.plot(this.#S,this.#T)}),this.#s.onmouseleave=t=>{this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.onmousedown=t=>{if(0==t.button){let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;i!=this.#ab||s!=this.#ac?(this.#_=!0,this.#aa=!1):(this.#aa=!0,this.#_=!1),i<this.#I?this.#ab=this.#I:i>this.#I+this.#C?this.#ab=this.#I+this.#C:this.#ab=i,s<this.#G?this.#ac=this.#G:s>this.#G+this.#D?this.#ac=this.#G+this.#D:this.#ac=s}},this.#s.onmouseup=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset;if(this.#_){this.#_=!1;let s=this.#t.findIndex(t=>t.nx>=i),h=this.#t.findIndex(t=>t.nx>=this.#ab);s<h?this.plot(this.#S+s,this.#S+h-1):this.plot(this.#S+h,this.#S+s-1),this.#i.removeAttribute("x"),this.#i.removeAttribute("y"),this.#i.removeAttribute("width"),this.#i.removeAttribute("height")}this.#aa&&(this.#aa=!1)},this.#s.onmousemove=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;if(i>=this.#I&&i<=this.#C+this.#I&&s>=this.#G&&s<=this.#D+this.#G){if(this.layout.xAxis.spy.visible&&this.#t.length>0){let h=this.#t.findIndex(t=>t.nx>i);-1==h&&(h=this.#t.length-1),0==h&&(h=1);let r=1==this.#t.length?this.#t[0]:i>(this.#t[h].nx+this.#t[h-1].nx)/2?this.#t[h]:this.#t[h-1];this.#w.setAttribute("y1",this.#D+this.#G),this.#w.setAttribute("y2",this.#G),this.#w.setAttribute("x1",r.nx),this.#w.setAttribute("x2",r.nx),this.#y.setAttribute("x",r.nx),this.#y.textContent=this.layout.xAxis.tick.text(r.Date);let l=this.#y.getBoundingClientRect();this.#A.setAttribute("x",l.left-e.left),this.#A.setAttribute("y",l.top-e.top),this.#A.setAttribute("width",l.width),this.#A.setAttribute("height",l.height)}if(this.layout.yAxis.spy.visible){this.#x.setAttribute("x1",this.#I),this.#x.setAttribute("y1",s),this.#x.setAttribute("x2",this.#I+this.#C),this.#x.setAttribute("y2",s);let a=(this.#D-(s-this.#G))*(this.#V-this.#U)/this.#D+this.#U;this.#z.setAttribute("y",s+this.layout.yAxis.tick.style.fontSize/2),this.#z.textContent=this.layout.yAxis.tick.text(a);let o=this.#z.getBoundingClientRect();this.#B.setAttribute("x",o.left-e.left),this.#B.setAttribute("y",o.top-e.top),this.#B.setAttribute("width",o.width),this.#B.setAttribute("height",o.height)}if(this.#_&&(i>this.#ab?(this.#i.setAttribute("x",this.#ab),this.#i.setAttribute("width",i-this.#ab)):(this.#i.setAttribute("x",i),this.#i.setAttribute("width",this.#ab-i)),this.#i.setAttribute("y",this.#G),this.#i.setAttribute("height",this.#D)),this.#aa){let y=this.#t.findIndex(t=>t.nx>=Math.abs(i-this.#ab)*this.interactivity.panningSpeed/10+this.#I);y>0&&(i>this.#ab?this.plot(this.#S-y,this.#T-y):this.plot(this.#S+y,this.#T+y))}}else this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.ondblclick=t=>{this.plot(this.#X,this.#Y)}}plot(t,e){if(e<=t||0==this.data.length||t<0||e>this.data.length-1)return;this.#S=0,this.#T=this.data.length-1,arguments.length>=1&&(this.#S=t),0==this.#S&&"candlestickctc"==this.chartType.toLowerCase()&&(this.#S=1),arguments.length>=2&&(this.#T=e),this.#T==this.data.length-1?this.#t=this.data.slice(this.#S):this.#t=this.data.slice(this.#S,this.#T+1),"line"==this.chartType.toLowerCase()?(this.#U=Math.floor(this.#t.reduce((t,e)=>t.Close<e.Close?t:e).Close*(1-this.#K)),this.#V=Math.ceil(this.#t.reduce((t,e)=>t.Close>e.Close?t:e).Close*(1+this.#K))):(this.#U=Math.floor(this.#t.reduce((t,e)=>t.Low<e.Low?t:e).Low*(1-this.#K)),this.#V=Math.ceil(this.#t.reduce((t,e)=>t.High>e.High?t:e).High*(1+this.#K)));let i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),i.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),i.textContent=this.layout.yAxis.tick.text(this.#V),this.#s.appendChild(i);let s=i.getBBox(),h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),h.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),h.textContent=this.layout.yAxis.tick.text(this.#U),this.#s.appendChild(h);let r=h.getBBox();this.#Q=s.width>r.width?s.width:r.width;let l=document.createElementNS("http://www.w3.org/2000/svg","text");l.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),l.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),l.textContent=this.layout.xAxis.tick.text(this.data[this.data.length-1].Date),this.#s.appendChild(l),this.#R=l.getBBox().width,this.#W||(this.#W=!0,this.#X=this.#S,this.#Y=this.#T),this.#s.innerHTML="",this.#G=$enCharts.options.ptChart,this.layout.title.text&&(this.#G+=this.layout.title.style.fontSize+$enCharts.options.mbChartTitle),this.#I=this.#O+this.#P+this.#Q+$enCharts.options.plChart,this.layout.yAxis.title.text&&(this.#I+=this.layout.yAxis.title.style.fontSize+$enCharts.options.mAxisTitle),this.#H=this.#O+this.#P+this.layout.xAxis.tick.style.fontSize+$enCharts.options.pbChart,this.layout.xAxis.title.text&&(this.#H+=this.layout.xAxis.title.style.fontSize+$enCharts.options.mAxisTitle),this.#J=$enCharts.options.prChart+this.#R/2;let a=this.#s.getBoundingClientRect();if(this.#u={height:a.height,width:a.width},this.#C=a.width-this.#I-this.#J,this.#D=a.height-this.#G-this.#H,this.#i=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#i.setAttribute("stroke",this.interactivity.zoomRect.stroke),this.#i.setAttribute("fill",this.interactivity.zoomRect.fill),this.#i.setAttribute("stroke-width",this.interactivity.zoomRect.strokeWidth),this.#i.setAttribute("stroke-dasharray",this.interactivity.zoomRect.strokeDashArray),this.#i.setAttribute("width",0),this.#i.setAttribute("height",0),this.#i.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#i),this.layout.xAxis.visible){let o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("stroke",this.layout.xAxis.style.stroke),o.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),o.setAttribute("shape-rendering","crispEdges"),o.setAttribute("x1",this.#I),o.setAttribute("y1",this.#G+this.#D),o.setAttribute("x2",this.#I+this.#C),o.setAttribute("y2",this.#G+this.#D),this.#s.appendChild(o)}if(this.layout.yAxis.visible){let y=document.createElementNS("http://www.w3.org/2000/svg","line");y.setAttribute("stroke",this.layout.yAxis.style.stroke),y.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),y.setAttribute("shape-rendering","crispEdges"),y.setAttribute("x1",this.#I),y.setAttribute("y1",this.#G),y.setAttribute("x2",this.#I),y.setAttribute("y2",this.#G+this.#D),this.#s.appendChild(y)}let n;if("auto"==this.layout.xAxis.tick.placement.toLowerCase()||this.layout.xAxis.tick.nbTicks<=1){let x=this.#C/(this.#T-this.#S),u=this.#E/x;n=$enCharts.s(u);let d=Math.ceil(this.#S/n),A=Math.floor(this.#T/n);for(let g=d;g<=A;g++)this.#ad(Math.floor(g*n))}else{n=(this.#T-this.#S)/(this.layout.xAxis.tick.nbTicks-1);for(let b=0;b<this.layout.xAxis.tick.nbTicks;b++)this.#ad(this.#S+Math.floor(b*n))}this.#w=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#w.setAttribute("stroke",this.layout.xAxis.spy.lineStyle.stroke),this.#w.setAttribute("stroke-width",1),this.#w.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#w),this.#A=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#A.setAttribute("stroke",this.layout.xAxis.spy.rectStyle.stroke),this.#A.setAttribute("fill",this.layout.xAxis.spy.rectStyle.fill),this.#A.setAttribute("rx",this.layout.xAxis.spy.rectStyle.cornerRadius),this.#A.setAttribute("shape-rendering","geometricPrecision"),this.#A.setAttribute("width",0),this.#A.setAttribute("height",0),this.#s.appendChild(this.#A),this.#y=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#y.setAttribute("fill",this.layout.xAxis.spy.textStyle.color),this.#y.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),this.#y.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),this.#y.setAttribute("text-anchor","middle"),this.#y.setAttribute("y",this.#G+this.#D+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize),this.#s.appendChild(this.#y);let c;if("auto"==this.layout.yAxis.tick.placement.toLowerCase()||this.layout.yAxis.tick.nbTicks<=1){let f=this.#D/(this.#V-this.#U),p=this.#F/f;c=$enCharts.s(p);let w=Math.ceil(this.#U/c),S=Math.floor(this.#V/c);for(let k=w;k<=S;k++)this.#ae(Math.floor(k*c))}else{c=(this.#V-this.#U)/(this.layout.yAxis.tick.nbTicks-1);for(let m=0;m<this.layout.yAxis.tick.nbTicks;m++)this.#ae(this.#U+Math.floor(m*c))}if(this.#x=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#x.setAttribute("stroke",this.layout.yAxis.spy.lineStyle.stroke),this.#x.setAttribute("stroke-width",1),this.#x.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#x),this.#B=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#B.setAttribute("stroke",this.layout.yAxis.spy.rectStyle.stroke),this.#B.setAttribute("fill",this.layout.yAxis.spy.rectStyle.fill),this.#B.setAttribute("rx",this.layout.yAxis.spy.rectStyle.cornerRadius),this.#B.setAttribute("shape-rendering","geometricPrecision"),this.#B.setAttribute("width",0),this.#B.setAttribute("height",0),this.#s.appendChild(this.#B),this.#z=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#z.setAttribute("fill",this.layout.yAxis.spy.textStyle.color),this.#z.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),this.#z.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),this.#z.setAttribute("text-anchor","end"),this.#z.setAttribute("x",this.#I-this.#O-this.#P),this.#s.appendChild(this.#z),"line"==this.chartType.toLowerCase()){let $="";for(let v=this.#S;v<=this.#T;v++){let C=this.#ah(v,this.data[v].Close);this.#t[v-this.#S].nx=C.x,$+=C.x+","+C.y+" "}let z=document.createElementNS("http://www.w3.org/2000/svg","polyline");z.setAttribute("points",$.trim()),z.setAttribute("fill","none"),z.setAttribute("stroke","black"),z.setAttribute("stroke-width",2),z.setAttribute("stroke-linejoin","round"),z.setAttribute("shape-rendering","geometricPrecision"),this.#s.appendChild(z)}else if("hilo"==this.chartType.toLowerCase())for(let M=this.#S;M<=this.#T;M++){let _=this.#ah(M,this.data[M].Low),L=this.#ah(M,this.data[M].High),O=document.createElementNS("http://www.w3.org/2000/svg","line");O.setAttribute("x1",_.x),O.setAttribute("y1",_.y),O.setAttribute("x2",L.x),O.setAttribute("y2",L.y),O.setAttribute("stroke","black"),O.setAttribute("stroke-width",2),O.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(O),this.#t[M-this.#S].nx=_.x}else if("ohlc"==this.chartType.toLowerCase())for(let R=this.#S;R<=this.#T;R++){let E="black";this.data[R].Open>this.data[R].Close&&(E="red"),this.data[R].Open<this.data[R].Close&&(E="green");let W=this.#ah(R,this.data[R].Low),N=this.#ah(R,this.data[R].High),H=document.createElementNS("http://www.w3.org/2000/svg","line");H.setAttribute("x1",W.x),H.setAttribute("y1",W.y),H.setAttribute("x2",N.x),H.setAttribute("y2",N.y),H.setAttribute("stroke",E),H.setAttribute("stroke-width",2),H.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(H);let T=this.#ah(R,this.data[R].Open),X=document.createElementNS("http://www.w3.org/2000/svg","line");X.setAttribute("x1",T.x),X.setAttribute("y1",T.y),X.setAttribute("x2",T.x-3),X.setAttribute("y2",T.y),X.setAttribute("stroke",E),X.setAttribute("stroke-width",2),X.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(X);let P=this.#ah(R,this.data[R].Close),D=document.createElementNS("http://www.w3.org/2000/svg","line");D.setAttribute("x1",P.x),D.setAttribute("y1",P.y),D.setAttribute("x2",P.x+3),D.setAttribute("y2",P.y),D.setAttribute("stroke",E),D.setAttribute("stroke-width",2),D.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(D),this.#t[R-this.#S].nx=P.x}else if("candlestickotc"==this.chartType.toLowerCase())for(let Y=this.#S;Y<=this.#T;Y++){let B=this.#ah(Y,this.data[Y].Low),V=this.#ah(Y,this.data[Y].High),F=this.#ah(Y,this.data[Y].Open),I=this.#ah(Y,this.data[Y].Close);if(this.data[Y].Open>this.data[Y].Close){let G=document.createElementNS("http://www.w3.org/2000/svg","rect");G.setAttribute("x",F.x-2),G.setAttribute("y",F.y),G.setAttribute("width",4),G.setAttribute("height",I.y-F.y),G.setAttribute("stroke","red"),G.setAttribute("fill","red"),G.setAttribute("stroke-width",1),G.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(G);let j=document.createElementNS("http://www.w3.org/2000/svg","line");j.setAttribute("x1",V.x),j.setAttribute("y1",V.y),j.setAttribute("x2",F.x),j.setAttribute("y2",F.y),j.setAttribute("stroke","red"),j.setAttribute("stroke-width",1),j.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(j);let U=document.createElementNS("http://www.w3.org/2000/svg","line");U.setAttribute("x1",B.x),U.setAttribute("y1",B.y),U.setAttribute("x2",I.x),U.setAttribute("y2",I.y),U.setAttribute("stroke","red"),U.setAttribute("stroke-width",1),U.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(U)}else if(this.data[Y].Open<this.data[Y].Close){let q=document.createElementNS("http://www.w3.org/2000/svg","rect");q.setAttribute("x",I.x-2),q.setAttribute("y",I.y),q.setAttribute("width",4),q.setAttribute("height",F.y-I.y),q.setAttribute("fill","green"),q.setAttribute("stroke","green"),q.setAttribute("stroke-width",1),q.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(q);let J=document.createElementNS("http://www.w3.org/2000/svg","line");J.setAttribute("x1",V.x),J.setAttribute("y1",V.y),J.setAttribute("x2",I.x),J.setAttribute("y2",I.y),J.setAttribute("stroke","green"),J.setAttribute("stroke-width",1),J.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(J);let K=document.createElementNS("http://www.w3.org/2000/svg","line");K.setAttribute("x1",B.x),K.setAttribute("y1",B.y),K.setAttribute("x2",F.x),K.setAttribute("y2",F.y),K.setAttribute("stroke","green"),K.setAttribute("stroke-width",1),K.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(K)}else{let Q=document.createElementNS("http://www.w3.org/2000/svg","line");Q.setAttribute("x1",B.x),Q.setAttribute("y1",B.y),Q.setAttribute("x2",V.x),Q.setAttribute("y2",V.y),Q.setAttribute("stroke","black"),Q.setAttribute("stroke-width",1),Q.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(Q);let Z=document.createElementNS("http://www.w3.org/2000/svg","line");Z.setAttribute("x1",F.x-2),Z.setAttribute("y1",F.y),Z.setAttribute("x2",I.x+2),Z.setAttribute("y2",I.y),Z.setAttribute("stroke","black"),Z.setAttribute("stroke-width",1),Z.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(Z)}this.#t[Y-this.#S].nx=I.x}else if("candlestickctc"!=this.chartType.toLowerCase())return;else if(this.data.length>=2)for(let tt=this.#S;tt<=this.#T;tt++){let te=this.#ah(tt,this.data[tt].Low),ti=this.#ah(tt,this.data[tt].High),ts=this.#ah(tt,this.data[tt-1].Close),th=this.#ah(tt,this.data[tt].Close);if(this.data[tt-1].Close>this.data[tt].Close){let tr=document.createElementNS("http://www.w3.org/2000/svg","rect");tr.setAttribute("x",ts.x-2),tr.setAttribute("y",ts.y),tr.setAttribute("width",4),tr.setAttribute("height",th.y-ts.y),tr.setAttribute("stroke","red"),tr.setAttribute("fill","red"),tr.setAttribute("stroke-width",1),tr.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tr);let tl=document.createElementNS("http://www.w3.org/2000/svg","line");tl.setAttribute("x1",ti.x),tl.setAttribute("y1",ti.y),tl.setAttribute("x2",ts.x),tl.setAttribute("y2",ts.y),tl.setAttribute("stroke","red"),tl.setAttribute("stroke-width",1),tl.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tl);let ta=document.createElementNS("http://www.w3.org/2000/svg","line");ta.setAttribute("x1",te.x),ta.setAttribute("y1",te.y),ta.setAttribute("x2",th.x),ta.setAttribute("y2",th.y),ta.setAttribute("stroke","red"),ta.setAttribute("stroke-width",1),ta.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(ta)}else if(this.data[tt-1].Close<this.data[tt].Close){let to=document.createElementNS("http://www.w3.org/2000/svg","rect");to.setAttribute("x",th.x-2),to.setAttribute("y",th.y),to.setAttribute("width",4),to.setAttribute("height",ts.y-th.y),to.setAttribute("fill","green"),to.setAttribute("stroke","green"),to.setAttribute("stroke-width",1),to.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(to);let ty=document.createElementNS("http://www.w3.org/2000/svg","line");ty.setAttribute("x1",ti.x),ty.setAttribute("y1",ti.y),ty.setAttribute("x2",th.x),ty.setAttribute("y2",th.y),ty.setAttribute("stroke","green"),ty.setAttribute("stroke-width",1),ty.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(ty);let tn=document.createElementNS("http://www.w3.org/2000/svg","line");tn.setAttribute("x1",te.x),tn.setAttribute("y1",te.y),tn.setAttribute("x2",ts.x),tn.setAttribute("y2",ts.y),tn.setAttribute("stroke","green"),tn.setAttribute("stroke-width",1),tn.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tn)}else{let tx=document.createElementNS("http://www.w3.org/2000/svg","line");tx.setAttribute("x1",te.x),tx.setAttribute("y1",te.y),tx.setAttribute("x2",ti.x),tx.setAttribute("y2",ti.y),tx.setAttribute("stroke","black"),tx.setAttribute("stroke-width",1),tx.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tx);let tu=document.createElementNS("http://www.w3.org/2000/svg","line");tu.setAttribute("x1",ts.x-2),tu.setAttribute("y1",ts.y),tu.setAttribute("x2",th.x+2),tu.setAttribute("y2",th.y),tu.setAttribute("stroke","black"),tu.setAttribute("stroke-width",1),tu.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tu)}this.#t[tt-this.#S].nx=th.x}if(this.layout.title.text){let td=document.createElementNS("http://www.w3.org/2000/svg","text");td.setAttribute("font-size",this.layout.title.style.fontSize),td.setAttribute("font-family",this.layout.title.style.fontFamily),td.setAttribute("font-weight",this.layout.title.style.fontWeight),td.setAttribute("fill",this.layout.title.style.color),td.setAttribute("x",this.#I+this.#C/2),td.setAttribute("y",this.layout.title.style.fontSize+$enCharts.options.ptChart),td.setAttribute("text-anchor","middle"),td.textContent=this.layout.title.text,this.#s.appendChild(td)}if(this.layout.xAxis.title.text){let tA=document.createElementNS("http://www.w3.org/2000/svg","text");tA.setAttribute("font-size",this.layout.xAxis.title.style.fontSize),tA.setAttribute("font-family",this.layout.xAxis.title.style.fontFamily),tA.setAttribute("font-weight",this.layout.xAxis.title.style.fontWeight),tA.setAttribute("fill",this.layout.xAxis.title.style.color),tA.setAttribute("x",this.#I+this.#C/2),tA.setAttribute("y",this.#G+this.#D+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize+$enCharts.options.mAxisTitle+this.layout.xAxis.title.style.fontSize),tA.setAttribute("text-anchor","middle"),tA.textContent=this.layout.xAxis.title.text,this.#s.appendChild(tA)}if(this.layout.yAxis.title.text){let tg=document.createElementNS("http://www.w3.org/2000/svg","text");tg.setAttribute("font-size",this.layout.yAxis.title.style.fontSize),tg.setAttribute("font-family",this.layout.yAxis.title.style.fontFamily),tg.setAttribute("font-weight",this.layout.yAxis.title.style.fontWeight),tg.setAttribute("fill",this.layout.yAxis.title.style.color),tg.setAttribute("text-anchor","start"),tg.textContent=this.layout.yAxis.title.text,this.#s.appendChild(tg);let tb=tg.getBoundingClientRect(),tc=this.#I-this.#O-this.#P-this.#Q-$enCharts.options.mAxisTitle,tf=this.#G+this.#D/2+tb.width/2;tg.setAttribute("x",tc),tg.setAttribute("y",tf),tg.setAttribute("transform","rotate(-90,"+tc+","+tf+")")}}#ah(b,c){return new $enCharts.Point((b-this.#S)*this.#C/(this.#T-this.#S)+this.#I,this.#D-(c-this.#U)*this.#D/(this.#V-this.#U)+this.#G)}#ad(f){let p=this.#ah(f,this.#U),w=this.#ah(f,this.#V);if(this.layout.xAxis.visible){let S=document.createElementNS("http://www.w3.org/2000/svg","line");S.setAttribute("stroke",this.layout.xAxis.style.stroke),S.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),S.setAttribute("x1",p.x),S.setAttribute("y1",p.y),S.setAttribute("x2",p.x),S.setAttribute("y2",p.y+this.#O),S.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(S)}let k=document.createElementNS("http://www.w3.org/2000/svg","text");if(k.setAttribute("fill",this.layout.xAxis.tick.style.color),k.setAttribute("x",p.x),k.setAttribute("y",p.y+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize),k.setAttribute("text-anchor","middle"),k.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),k.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),k.textContent=this.layout.xAxis.tick.text(this.#t[f-this.#S].Date),this.#s.appendChild(k),this.layout.xAxis.grid.visible&&f!=this.#S&&f!=this.#T){let m=document.createElementNS("http://www.w3.org/2000/svg","line");m.setAttribute("stroke",this.layout.xAxis.grid.style.stroke),m.setAttribute("stroke-width",this.layout.xAxis.grid.style.strokeWidth),m.setAttribute("stroke-dasharray",this.layout.xAxis.grid.style.strokeDashArray),m.setAttribute("x1",p.x),m.setAttribute("y1",p.y),m.setAttribute("x2",w.x),m.setAttribute("y2",w.y),m.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(m)}}#ae($){let v=this.#ah(this.#S,$),C=this.#ah(this.#T,$);if(this.layout.yAxis.visible){let z=document.createElementNS("http://www.w3.org/2000/svg","line");z.setAttribute("stroke",this.layout.yAxis.style.stroke),z.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),z.setAttribute("x1",v.x),z.setAttribute("y1",v.y),z.setAttribute("x2",v.x-this.#O),z.setAttribute("y2",v.y),z.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(z)}let M=document.createElementNS("http://www.w3.org/2000/svg","text");if(M.setAttribute("fill",this.layout.yAxis.tick.style.color),M.setAttribute("x",v.x-this.#O-this.#P),M.setAttribute("y",v.y+this.layout.yAxis.tick.style.fontSize/2),M.setAttribute("text-anchor","end"),M.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),M.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),M.textContent=this.layout.yAxis.tick.text($),this.#s.appendChild(M),this.layout.yAxis.grid.visible&&$!=this.#U&&$!=this.#V){let _=document.createElementNS("http://www.w3.org/2000/svg","line");_.setAttribute("stroke",this.layout.yAxis.grid.style.stroke),_.setAttribute("stroke-width",this.layout.yAxis.grid.style.strokeWidth),_.setAttribute("stroke-dasharray",this.layout.yAxis.grid.style.strokeDashArray),_.setAttribute("x1",v.x),_.setAttribute("y1",v.y),_.setAttribute("x2",C.x),_.setAttribute("y2",C.y),_.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(_)}}}class BarChart{#s=document.createElementNS("http://www.w3.org/2000/svg","svg");#u;#C;#D;#ai;#E=100;#F=100;#o=[];set data(t){t&&t.length&&(this.#o.length=0,t.forEach(t=>{let e=new $enCharts.BarDataSeries(t.name);e.data=t.data,t.style&&(e.style=t.style),this.#o.push(e)}))}#p=new $enCharts.Layout;get layout(){return this.#p}set layout(t){t.legend&&(this.#p.legend=t.legend),t.title&&(this.#p.title=t.title),t.xAxis&&(this.#p.xAxis=t.xAxis),t.yAxis&&(this.#p.yAxis=t.yAxis)}#r="transparent";get backgroundColor(){return this.#r}set backgroundColor(t){this.#r=t,this.#s.style.backgroundColor=t}#G;#H;#I;#J;#K=.05;#aj=5;#ak=5;#al=5;#am=5;#an=20;#ao=10;#ap=5;#aq=20;#O=5;#P=2;#Q;#R;#S;#T;#U;#V;constructor(t){this.#s.setAttribute("height","100%"),this.#s.setAttribute("width","100%"),this.#s.style["user-select"]="none",t.appendChild(this.#s),window.addEventListener("resize",t=>{let e=this.#s.getBoundingClientRect();this.#u&&(e.width!==this.#u.width||e.height!==this.#u.height)&&this.plot()})}plot(){this.#S=0,this.#T=this.#o[0].data.length;let t=this.#o[0].data.reduce((t,e)=>t>e?t:e);this.#V=t>0?t*(1+this.#K):t*(1-this.#K),this.#o.slice(1).forEach(t=>{let e=t.data.reduce((t,e)=>t>e?t:e),i=e>0?e*(1+this.#K):e*(1-this.#K);i>this.#V&&(this.#V=i)});let e=this.#o[0].data.reduce((t,e)=>t<e?t:e);this.#U=e>0?e*(1-this.#K):e*(1+this.#K),this.#o.slice(1).forEach(t=>{let e=t.data.reduce((t,e)=>t<e?t:e),i=e>0?e*(1-this.#K):e*(1+this.#K);i<this.#U&&(this.#U=i)});let i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),i.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),i.textContent=this.layout.yAxis.tick.text(this.#V),this.#s.appendChild(i);let s=i.getBBox(),h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),h.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),h.textContent=this.layout.yAxis.tick.text(this.#U),this.#s.appendChild(h);let r=h.getBBox();this.#Q=s.width>r.width?s.width:r.width;let l=document.createElementNS("http://www.w3.org/2000/svg","text");l.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),l.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),l.textContent=this.layout.xAxis.tick.text(this.#o[0].data.length-1),this.#s.appendChild(l),this.#R=l.getBBox().width,this.#s.innerHTML="",this.#G=$enCharts.options.ptChart,this.layout.title.text&&(this.#G+=this.layout.title.style.fontSize+$enCharts.options.mbChartTitle),this.#I=this.#O+this.#P+this.#Q+$enCharts.options.plChart,this.layout.yAxis.title.text&&(this.#I+=this.layout.yAxis.title.style.fontSize+$enCharts.options.mAxisTitle),this.#H=this.#O+this.#P+this.layout.xAxis.tick.style.fontSize+$enCharts.options.pbChart,this.layout.xAxis.title.text&&(this.#H+=this.layout.xAxis.title.style.fontSize+$enCharts.options.mAxisTitle),this.#J=$enCharts.options.prChart;let a=this.#s.getBoundingClientRect();if(this.#u={height:a.height,width:a.width},this.#o.length>0&&this.layout.legend.position){let o=document.createElementNS("http://www.w3.org/2000/svg","svg");this.#s.appendChild(o);let y=document.createElementNS("http://www.w3.org/2000/svg","rect");y.setAttribute("stroke",this.layout.legend.rectStyle.stroke),y.setAttribute("stroke-width",this.layout.legend.rectStyle.strokeWidth),y.setAttribute("stroke-dasharray",this.layout.legend.rectStyle.strokeDashArray),y.setAttribute("fill",this.layout.legend.rectStyle.fill),y.setAttribute("rx",this.layout.legend.rectStyle.cornerRadius),o.appendChild(y),this.#ao>this.layout.legend.textStyle.fontSize&&(this.#ao=this.layout.legend.textStyle.fontSize);let n=this.#aj+this.layout.legend.rectStyle.strokeWidth/2,x=this.#ak,u=(this.layout.legend.textStyle.fontSize-this.#ao)/2;this.#o.forEach((t,e)=>{t.name||(t.name="Series "+(e+1));let i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("x",n),i.setAttribute("y",x+u),i.setAttribute("width",this.#an),i.setAttribute("height",this.#ao),i.setAttribute("stroke",t.style.stroke),i.setAttribute("stroke-dasharray",t.style.strokeDashArray),i.setAttribute("stroke-width",t.style.strokeWidth),i.setAttribute("fill",t.style.fill),i.setAttribute("rx",t.style.cornerRadius),o.appendChild(i);let s=document.createElementNS("http://www.w3.org/2000/svg","text");if(s.setAttribute("font-size",this.layout.legend.textStyle.fontSize),s.setAttribute("font-family",this.layout.legend.textStyle.fontFamily),s.setAttribute("font-weight",this.layout.legend.textStyle.fontWeight),s.setAttribute("fill",this.layout.legend.textStyle.color),s.setAttribute("x",n+this.#an+this.#ap),s.setAttribute("y",x+this.layout.legend.textStyle.fontSize),s.setAttribute("text-anchor","start"),s.textContent=t.name,o.appendChild(s),"north"===this.layout.legend.position.toLocaleLowerCase()||"south"===this.layout.legend.position.toLocaleLowerCase()){let h=s.getBBox();n+=this.#an+this.#ap+h.width+this.#aq}else x+=this.layout.legend.textStyle.fontSize+this.#aq});let d=o.getBBox(),A=d.width+this.layout.legend.rectStyle.strokeWidth+2*this.#aj,g=d.height+this.layout.legend.rectStyle.strokeWidth+this.#ak;switch(o.setAttribute("width",A+"px"),o.setAttribute("height",g+"px"),y.setAttribute("x",this.layout.legend.rectStyle.strokeWidth/2),y.setAttribute("y",this.layout.legend.rectStyle.strokeWidth/2),y.setAttribute("height",g-this.layout.legend.rectStyle.strokeWidth),y.setAttribute("width",A-this.layout.legend.rectStyle.strokeWidth),this.layout.legend.position.toLowerCase()){case"east":o.setAttribute("x",a.width-A-2*this.#am),o.setAttribute("y",this.#G+(a.height-this.#G-this.#H-g)/2),this.#J+=A+2*this.#am;break;case"west":o.setAttribute("x",this.#am),o.setAttribute("y",this.#G+(a.height-this.#G-this.#H-g)/2),this.#I+=A+2*this.#am;break;case"north":o.setAttribute("x",this.#I+(a.width-this.#I-this.#J-A)/2),o.setAttribute("y",this.#G),this.#G+=g+this.#al;break;case"northeast":o.setAttribute("x",a.width-A-2*this.#am),o.setAttribute("y",this.#G),this.#J+=A+2*this.#am;break;case"northwest":o.setAttribute("x",this.#am),o.setAttribute("y",this.#G),this.#I+=A+2*this.#am;break;case"southeast":o.setAttribute("x",a.width-A-2*this.#am),o.setAttribute("y",a.height-this.#al-g-this.#H),this.#J+=A+2*this.#am;break;case"southwest":o.setAttribute("x",this.#am),o.setAttribute("y",a.height-this.#al-g-this.#H),this.#I+=A+2*this.#am;break;default:o.setAttribute("x",this.#I+(a.width-this.#I-this.#J-A)/2),o.setAttribute("y",a.height-this.#al-g),this.#H+=g+this.#al}}if(this.#C=a.width-this.#I-this.#J,this.#D=a.height-this.#G-this.#H,this.#ai=this.#C/(this.#T-this.#S),this.layout.xAxis.visible){let b=document.createElementNS("http://www.w3.org/2000/svg","line");b.setAttribute("stroke",this.layout.xAxis.style.stroke),b.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),b.setAttribute("shape-rendering","crispEdges"),b.setAttribute("x1",this.#I),b.setAttribute("y1",this.#G+this.#D),b.setAttribute("x2",this.#I+this.#C),b.setAttribute("y2",this.#G+this.#D),this.#s.appendChild(b)}if(this.layout.yAxis.visible){let c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("stroke",this.layout.yAxis.style.stroke),c.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),c.setAttribute("shape-rendering","crispEdges"),c.setAttribute("x1",this.#I),c.setAttribute("y1",this.#G),c.setAttribute("x2",this.#I),c.setAttribute("y2",this.#G+this.#D),this.#s.appendChild(c)}let f;if("auto"==this.layout.xAxis.tick.placement.toLowerCase()||this.layout.xAxis.tick.nbTicks<=1){let p=this.#C/(this.#T-this.#S),w=this.#E/p;f=$enCharts.s(w);let S=Math.ceil(this.#S/f),k=Math.floor(this.#T/f);for(let m=S;m<k;m++){let $=m*f;this.#ad($)}}else{f=(this.#T-this.#S)/this.layout.xAxis.tick.nbTicks;for(let v=0;v<this.layout.xAxis.tick.nbTicks;v++){let C=this.#S+v*f;this.#ad(Math.floor(C))}}let z;if("auto"==this.layout.yAxis.tick.placement.toLowerCase()||this.layout.yAxis.tick.nbTicks<=1){let M=this.#D/(this.#V-this.#U),_=this.#F/M;z=$enCharts.s(_);let L=Math.ceil(this.#U/z),O=Math.floor(this.#V/z);for(let R=L;R<=O;R++)this.#ae(R*z)}else{z=(this.#V-this.#U)/(this.layout.yAxis.tick.nbTicks-1);for(let E=0;E<this.layout.yAxis.tick.nbTicks;E++)this.#ae(this.#U+E*z)}let W=.075*this.#ai,N=this.#o.length<=1?0:.085*this.#ai/(this.#o.length-1),H=0===this.#o.length?0:1===this.#o.length?.85*this.#ai:.765*this.#ai/this.#o.length;if(this.#o.forEach((t,e)=>{for(let i=0;i<t.data.length;i++){let s=this.#ag(t.data[i]),h=document.createElementNS("http://www.w3.org/2000/svg","rect");h.setAttribute("stroke",t.style.stroke),h.setAttribute("stroke-width",t.style.strokeWidth),h.setAttribute("stroke-dasharray",t.style.strokeDashArray),h.setAttribute("fill",t.style.fill),h.setAttribute("rx",t.style.cornerRadius),h.setAttribute("x",this.#I+i*this.#ai+W+e*(H+N)),h.setAttribute("y",s),h.setAttribute("height",this.#G+this.#D-s),h.setAttribute("width",H),this.#s.appendChild(h)}}),this.layout.title.text){let T=document.createElementNS("http://www.w3.org/2000/svg","text");T.setAttribute("font-size",this.layout.title.style.fontSize),T.setAttribute("font-family",this.layout.title.style.fontFamily),T.setAttribute("font-weight",this.layout.title.style.fontWeight),T.setAttribute("fill",this.layout.title.style.color),T.setAttribute("x",this.#I+this.#C/2),T.setAttribute("y",this.layout.title.style.fontSize+$enCharts.options.ptChart),T.setAttribute("text-anchor","middle"),T.textContent=this.layout.title.text,this.#s.appendChild(T)}if(this.layout.xAxis.title.text){let X=document.createElementNS("http://www.w3.org/2000/svg","text");X.setAttribute("font-size",this.layout.xAxis.title.style.fontSize),X.setAttribute("font-family",this.layout.xAxis.title.style.fontFamily),X.setAttribute("font-weight",this.layout.xAxis.title.style.fontWeight),X.setAttribute("fill",this.layout.xAxis.title.style.color),X.setAttribute("x",this.#I+this.#C/2),X.setAttribute("y",this.#G+this.#D+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize+$enCharts.options.mAxisTitle+this.layout.xAxis.title.style.fontSize),X.setAttribute("text-anchor","middle"),X.textContent=this.layout.xAxis.title.text,this.#s.appendChild(X)}if(this.layout.yAxis.title.text){let P=document.createElementNS("http://www.w3.org/2000/svg","text");P.setAttribute("font-size",this.layout.yAxis.title.style.fontSize),P.setAttribute("font-family",this.layout.yAxis.title.style.fontFamily),P.setAttribute("font-weight",this.layout.yAxis.title.style.fontWeight),P.setAttribute("fill",this.layout.yAxis.title.style.color),P.setAttribute("text-anchor","start"),P.textContent=this.layout.yAxis.title.text,this.#s.appendChild(P);let D=P.getBoundingClientRect(),Y=this.#I-this.#O-this.#P-this.#Q-$enCharts.options.mAxisTitle,B=this.#G+this.#D/2+D.width/2;P.setAttribute("x",Y),P.setAttribute("y",B),P.setAttribute("transform","rotate(-90,"+Y+","+B+")")}}#ah(L,O){return new $enCharts.Point((L-this.#S)*this.#C/(this.#T-this.#S)+this.#I,this.#D-(O-this.#U)*this.#D/(this.#V-this.#U)+this.#G)}#af(R){return(R-this.#S)*this.#C/(this.#T-this.#S)+this.#I}#ag(E){return this.#D-(E-this.#U)*this.#D/(this.#V-this.#U)+this.#G}#ad(W){let N=this.#ah(W,this.#U),H=this.#ah(W,this.#V);if(this.layout.xAxis.visible){let T=document.createElementNS("http://www.w3.org/2000/svg","line");T.setAttribute("stroke",this.layout.xAxis.style.stroke),T.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),T.setAttribute("x1",N.x),T.setAttribute("y1",N.y),T.setAttribute("x2",N.x),T.setAttribute("y2",N.y+this.#O),T.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(T)}let X=document.createElementNS("http://www.w3.org/2000/svg","text");if(X.setAttribute("fill",this.layout.xAxis.tick.style.color),X.setAttribute("x",N.x+this.#ai/2),X.setAttribute("y",N.y+this.#O+this.#P+this.layout.xAxis.tick.style.fontSize),X.setAttribute("text-anchor","middle"),X.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),X.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),X.textContent=this.layout.xAxis.tick.text(W),this.#s.appendChild(X),this.layout.xAxis.grid.visible&&W!=this.#S&&W!=this.#T){let P=document.createElementNS("http://www.w3.org/2000/svg","line");P.setAttribute("stroke",this.layout.xAxis.grid.style.stroke),P.setAttribute("stroke-width",this.layout.xAxis.grid.style.strokeWidth),P.setAttribute("stroke-dasharray",this.layout.xAxis.grid.style.strokeDashArray),P.setAttribute("x1",N.x),P.setAttribute("y1",N.y),P.setAttribute("x2",H.x),P.setAttribute("y2",H.y),P.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(P)}}#ae(D){let Y=this.#ah(this.#S,D),B=this.#ah(this.#T,D);if(this.layout.yAxis.visible){let V=document.createElementNS("http://www.w3.org/2000/svg","line");V.setAttribute("stroke",this.layout.yAxis.style.stroke),V.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),V.setAttribute("x1",Y.x),V.setAttribute("y1",Y.y),V.setAttribute("x2",Y.x-this.#O),V.setAttribute("y2",Y.y),V.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(V)}let F=document.createElementNS("http://www.w3.org/2000/svg","text");if(F.setAttribute("fill",this.layout.yAxis.tick.style.color),F.setAttribute("x",Y.x-this.#O-this.#P),F.setAttribute("y",Y.y+this.layout.yAxis.tick.style.fontSize/2),F.setAttribute("text-anchor","end"),F.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),F.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),F.textContent=this.layout.yAxis.tick.text(D),this.#s.appendChild(F),this.layout.yAxis.grid.visible&&D!=this.#U&&D!=this.#V){let I=document.createElementNS("http://www.w3.org/2000/svg","line");I.setAttribute("stroke",this.layout.yAxis.grid.style.stroke),I.setAttribute("stroke-width",this.layout.yAxis.grid.style.strokeWidth),I.setAttribute("stroke-dasharray",this.layout.yAxis.grid.style.strokeDashArray),I.setAttribute("x1",Y.x),I.setAttribute("y1",Y.y),I.setAttribute("x2",B.x),I.setAttribute("y2",B.y),I.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(I)}}}