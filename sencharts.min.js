var $enCharts={s:function(t){let e=Math.pow(10,Math.floor(Math.log(t)/Math.log(10))),i=100*e,s=0,h=100;return[1,2,5].forEach(r=>{let l=Math.abs(t-r*e);l<i&&(i=l,s=r*e),r<h&&(h=r)}),Math.abs(t-10*h*e)<Math.abs(t-s)&&(s=10*h*e),s},m:function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,h=0;h<t;h++)e+=i.charAt(Math.floor(Math.random()*s));return e},Point:class{x;y;constructor(t,e){this.x=t,this.y=e}},TextStyle:class{color="black";fontSize=10;fontWeight="normal";fontFamily='system-ui, "Segoe UI", Roboto, "Helvetica Neue", sans-serif"'},LineStyle:class{stroke="black";strokeWidth=1;strokeDashArray="none"},RectStyle:class{cornerRadius=0;stroke="black";strokeWidth=1;strokeDashArray="none";fill="none"},Tick:class{text=t=>t;nbTicks=5;placement="auto";#a=new $enCharts.TextStyle;get style(){return this.#a}set style(t){t.color&&(this.#a.color=t.color),t.fontSize&&(this.#a.fontSize=t.fontSize),t.fontWeight&&(this.#a.fontWeight=t.fontWeight),t.fontFamily&&(this.#a.fontFamily=t.fontFamily)}},Title:class{#a=new $enCharts.TextStyle;text="";constructor(){this.#a.fontSize=12}get style(){return this.#a}set style(t){t.color&&(this.#a.color=t.color),t.fontSize&&(this.#a.fontSize=t.fontSize),t.fontWeight&&(this.#a.fontWeight=t.fontWeight),t.fontFamily&&(this.#a.fontFamily=t.fontFamily)}},Legend:class{#b=new $enCharts.TextStyle;#c=new $enCharts.RectStyle;position="";constructor(){this.#b.fontSize=12,this.#c.stroke="transparent"}get textStyle(){return this.#b}set textStyle(t){t.color&&(this.#b.color=t.color),t.fontSize&&(this.#b.fontSize=t.fontSize),t.fontWeight&&(this.#b.fontWeight=t.fontWeight),t.fontFamily&&(this.#b.fontFamily=t.fontFamily)}get rectStyle(){return this.#c}set rectStyle(t){t.cornerRadius&&(this.#c.cornerRadius=t.cornerRadius),t.fill&&(this.#c.fill=t.fill),t.stroke&&(this.#c.stroke=t.stroke),t.strokeWidth&&(this.#c.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#c.strokeDashArray=t.strokeDashArray)}},Grid:class{#a=new $enCharts.LineStyle;visible=!0;constructor(){this.#a.strokeDashArray="1 3"}get style(){return this.#a}set style(t){t.stroke&&(this.#a.stroke=t.stroke),t.strokeWidth&&(this.#a.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#a.strokeDashArray=t.strokeDashArray)}},Spy:class{#d=new $enCharts.LineStyle;#b=new $enCharts.TextStyle;#c=new $enCharts.RectStyle;visible=!0;constructor(){this.#c.fill="black",this.#b.color="white"}get lineStyle(){return this.#d}set lineStyle(t){t.stroke&&(this.#d.stroke=t.stroke),t.strokeWidth&&(this.#d.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#d.strokeDashArray=t.strokeDashArray)}get textStyle(){return this.#b}set textStyle(t){t.color&&(this.#b.color=t.color),t.fontSize&&(this.#b.fontSize=t.fontSize),t.fontWeight&&(this.#b.fontWeight=t.fontWeight),t.fontFamily&&(this.#b.fontFamily=t.fontFamily)}get rectStyle(){return this.#c}set rectStyle(t){t.cornerRadius&&(this.#c.cornerRadius=t.cornerRadius),t.fill&&(this.#c.fill=t.fill),t.stroke&&(this.#c.stroke=t.stroke),t.strokeWidth&&(this.#c.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#c.strokeDashArray=t.strokeDashArray)}},Axis:class{#e=new $enCharts.Tick;#f=new $enCharts.Grid;#g=new $enCharts.Title;#h=new $enCharts.Spy;visible=!0;#a=new $enCharts.LineStyle;get tick(){return this.#e}set tick(t){t.nbTicks&&(this.#e.nbTicks=t.nbTicks),t.placement&&(this.#e.placement=t.placement),t.style&&(this.#e.style=t.style),t.text&&(this.#e.text=t.text)}get grid(){return this.#f}set grid(t){!0==t.visible&&(this.#f.visible=!0),!1==t.visible&&(this.#f.visible=!1),t.style&&(this.#f.style=t.style)}get title(){return this.#g}set title(t){t.text&&(this.#g.text=t.text),t.style&&(this.#g.style=t.style)}get spy(){return this.#h}set spy(t){t.lineStyle&&(this.#h.lineStyle=t.lineStyle),t.rectStyle&&(this.#h.rectStyle=t.rectStyle),t.textStyle&&(this.#h.textStyle=t.textStyle),!0==t.visible&&(this.#h.visible=!0),!1==t.visible&&(this.#h.visible=!1)}get style(){return this.#a}set style(t){t.stroke&&(this.#a.stroke=t.stroke),t.strokeWidth&&(this.#a.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#a.strokeDashArray=t.strokeDashArray)}},Interactivity:class{#i=new $enCharts.RectStyle;panningSpeed=2;constructor(){this.#i.strokeDashArray="2 2"}get zoomRect(){return this.#i}set zoomRect(t){t.cornerRadius&&(this.#i.cornerRadius=t.cornerRadius),t.fill&&(this.#i.fill=t.fill),t.stroke&&(this.#i.stroke=t.stroke),t.strokeWidth&&(this.#i.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#i.strokeDashArray=t.strokeDashArray)}},Layout:class{#j=new $enCharts.Axis;#k=new $enCharts.Axis;#g=new $enCharts.Title;#l=new $enCharts.Legend;constructor(){this.#k.tick.text=t=>t.toFixed(2)}get xAxis(){return this.#j}set xAxis(t){t.grid&&(this.#j.grid=t.grid),t.spy&&(this.#j.spy=t.spy),t.style&&(this.#j.style=t.style),t.tick&&(this.#j.tick=t.tick),t.title&&(this.#j.title=t.title),!0==t.visible&&(this.#j.visible=!0),!1==t.visible&&(this.#j.visible=!1)}get yAxis(){return this.#k}set yAxis(t){t.grid&&(this.#k.grid=t.grid),t.spy&&(this.#k.spy=t.spy),t.style&&(this.#k.style=t.style),t.tick&&(this.#k.tick=t.tick),t.title&&(this.#k.title=t.title),!0==t.visible&&(this.#k.visible=!0),!1==t.visible&&(this.#k.visible=!1)}get title(){return this.#g}set title(t){t.text&&(this.#g.text=t.text),t.style&&(this.#g.style=t.style)}get legend(){return this.#l}set legend(t){t.position&&(this.#l.position=t.position),t.textStyle&&(this.#l.textStyle=t.textStyle),t.rectStyle&&(this.#l.rectStyle=t.rectStyle)}},DataSeries:class{name="";#a=new $enCharts.LineStyle;data=[];constructor(t){this.name=t,this.#a.strokeWidth=2}get style(){return this.#a}set style(t){t.stroke&&(this.#a.stroke=t.stroke),t.strokeWidth&&(this.#a.strokeWidth=t.strokeWidth),t.strokeDashArray&&(this.#a.strokeDashArray=t.strokeDashArray)}}};class LineChart{#m=class{x=[];#n=[];get y(){return this.#n}set y(t){t&&(this.#n.length=0,t.forEach(t=>{let e=new $enCharts.DataSeries(t.name);e.data=t.data,t.style&&(e.style=t.style),this.#n.push(e)}))}};#o=new this.#m;set data(t){t.x&&(this.#o.x=t.x),t.y&&(this.#o.y=t.y)}#p=new $enCharts.Layout;get layout(){return this.#p}set layout(t){t.legend&&(this.#p.legend=t.legend),t.title&&(this.#p.title=t.title),t.xAxis&&(this.#p.xAxis=t.xAxis),t.yAxis&&(this.#p.yAxis=t.yAxis)}#q=new $enCharts.Interactivity;get interactivity(){return this.#q}set interactivity(t){if(t.panningSpeed){let e=parseInt(t.panningSpeed);isNaN(e)||(e>5&&(e=5),e<1&&(e=1),this.#q.panningSpeed=e)}t.zoomRect&&(this.#q.zoomRect=t.zoomRect)}#r="transparent";get backgroundColor(){return this.#r}set backgroundColor(t){this.#r=t,this.#s.style.backgroundColor=t}#t=[];#s=document.createElementNS("http://www.w3.org/2000/svg","svg");#u;#v=$enCharts.m(6);#w;#x;#y;#z;#A;#B;#i;#C;#D;#E=100;#F=100;#G=5;#H=3;#I=5;#J=5;#K=5;#L;#M;#N;#O=30;#P=.025;#Q=10;#R=5;#S=20;#T=2;#U=5;#V=2;#W=50;#X;#Y;#Z;#$;#_=!1;#aa;#ab;#ac;#ad;#ae=!1;#af=!1;#ag=0;#ah=0;constructor(t){this.#s.setAttribute("height","100%"),this.#s.setAttribute("width","100%"),this.#s.style["user-select"]="none",t.appendChild(this.#s),window.addEventListener("resize",t=>{let e=this.#s.getBoundingClientRect();this.#u&&(e.width!==this.#u.width||e.height!==this.#u.height)&&this.plot(this.#X,this.#Y,this.#Z,this.#$)}),this.#s.onmouseleave=t=>{this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.onmousedown=t=>{if(0==t.button){let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;i!=this.#ag||s!=this.#ah?(this.#ae=!0,this.#af=!1):(this.#af=!0,this.#ae=!1),i<this.#N?this.#ag=this.#N:i>this.#N+this.#C?this.#ag=this.#N+this.#C:this.#ag=i,s<this.#L?this.#ah=this.#L:s>this.#L+this.#D?this.#ah=this.#L+this.#D:this.#ah=s}},this.#s.onmouseup=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;if(this.#ae){if(this.#ae=!1,this.#t.findIndex(t=>t.nx>=i)!=this.#t.findIndex(t=>t.nx>=this.#ag)){let h=(i-this.#N)*(this.#Y-this.#X)/this.#C+this.#X,r=(this.#ag-this.#N)*(this.#Y-this.#X)/this.#C+this.#X,l=(this.#D-(s-this.#L))*(this.#$-this.#Z)/this.#D+this.#Z,a=(this.#D-(this.#ah-this.#L))*(this.#$-this.#Z)/this.#D+this.#Z;h>r?l>a?this.plot(r,h,a,l):l<a&&this.plot(r,h,l,a):h<r&&(l>a?this.plot(h,r,a,l):l<a&&this.plot(h,r,l,a))}this.#i.removeAttribute("x"),this.#i.removeAttribute("y"),this.#i.removeAttribute("width"),this.#i.removeAttribute("height")}this.#af&&(this.#af=!1)},this.#s.onmousemove=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;if(i>=this.#N&&i<=this.#C+this.#N&&s>=this.#L&&s<=this.#D+this.#L){if(this.layout.xAxis.spy.visible&&this.#t.length>0){let h=this.#t.findIndex(t=>t.nx>i);-1==h&&(h=this.#t.length-1),0==h&&(h=1);let r=1==this.#t.length?this.#t[0]:i>(this.#t[h].nx+this.#t[h-1].nx)/2?this.#t[h]:this.#t[h-1];this.#w.setAttribute("y1",this.#D+this.#L),this.#w.setAttribute("y2",this.#L),this.#w.setAttribute("x1",r.nx),this.#w.setAttribute("x2",r.nx),this.#y.setAttribute("x",r.nx),this.#y.textContent=this.layout.xAxis.tick.text(r.x);let l=this.#y.getBoundingClientRect();this.#A.setAttribute("x",l.left-e.left),this.#A.setAttribute("y",l.top-e.top),this.#A.setAttribute("width",l.width),this.#A.setAttribute("height",l.height)}if(this.layout.yAxis.spy.visible){this.#x.setAttribute("x1",this.#N),this.#x.setAttribute("y1",s),this.#x.setAttribute("x2",this.#N+this.#C),this.#x.setAttribute("y2",s);let a=(this.#D-(s-this.#L))*(this.#$-this.#Z)/this.#D+this.#Z;this.#z.setAttribute("y",s+this.layout.yAxis.tick.style.fontSize/2),this.#z.textContent=this.layout.yAxis.tick.text(a);let o=this.#z.getBoundingClientRect();this.#B.setAttribute("x",o.left-e.left),this.#B.setAttribute("y",o.top-e.top),this.#B.setAttribute("width",o.width),this.#B.setAttribute("height",o.height)}if(this.#ae&&(i>this.#ag?(this.#i.setAttribute("x",this.#ag),this.#i.setAttribute("width",i-this.#ag)):(this.#i.setAttribute("x",i),this.#i.setAttribute("width",this.#ag-i)),s>this.#ah?(this.#i.setAttribute("y",this.#ah),this.#i.setAttribute("height",s-this.#ah)):(this.#i.setAttribute("y",s),this.#i.setAttribute("height",this.#ah-s))),this.#af){let y=Math.abs(i-this.#ag)*(this.#Y-this.#X)/this.#C*this.interactivity.panningSpeed/10,n=Math.abs(s-this.#ah)*(this.#$-this.#Z)/this.#D*this.interactivity.panningSpeed/10;if(i>this.#ag){let x=this.#X-y,u=this.#Y-y;if(s>this.#ah){let d=this.#Z+n,A=this.#$+n;this.plot(x,u,d,A)}else{let b=this.#Z-n,c=this.#$-n;this.plot(x,u,b,c)}}else{let g=this.#X+y,p=this.#Y+y;if(s>this.#ah){let f=this.#Z+n,S=this.#$+n;this.plot(g,p,f,S)}else{let w=this.#Z-n,k=this.#$-n;this.plot(g,p,w,k)}}}}else this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.ondblclick=t=>{this.plot(this.#aa,this.#ab,this.#ac,this.#ad)}}plot(t,e,i,s){if(e<=t||0==this.#o.x.length||t<this.#o.x[0]||e>this.#o.x[this.#o.x.length-1])return;this.#X=this.#o.x[0],this.#Y=this.#o.x[this.#o.x.length-1],arguments.length>=1&&(this.#X=t),arguments.length>=2&&(this.#Y=e),this.#t=[];let h=this.#o.x.findIndex(t=>t>=this.#X);if(this.#Y==this.#o.x[this.#o.x.length-1])this.#o.x.slice(h).forEach(t=>{this.#t.push({x:t})});else{let r=this.#o.x.findIndex(t=>t>this.#Y);this.#o.x.slice(h,r).forEach(t=>{this.#t.push({x:t})})}if(arguments.length<4){let l=this.#o.y[0].data.slice(h,h+this.#t.length).reduce((t,e)=>t>e?t:e);this.#$=l>0?l*(1+this.#P):l*(1-this.#P),this.#o.y.slice(1).forEach(t=>{let e=t.data.slice(h,h+this.#t.length).reduce((t,e)=>t>e?t:e),i=e>0?e*(1+this.#P):e*(1-this.#P);i>this.#$&&(this.#$=i)})}if(arguments.length<3){let a=this.#o.y[0].data.slice(h,h+this.#t.length).reduce((t,e)=>t<e?t:e);this.#Z=a>0?a*(1-this.#P):a*(1+this.#P),this.#o.y.slice(1).forEach(t=>{let e=t.data.slice(h,h+this.#t.length).reduce((t,e)=>t<e?t:e),i=e>0?e*(1-this.#P):e*(1+this.#P);i<this.#Z&&(this.#Z=i)})}arguments.length>=3&&(this.#Z=i),arguments.length>=4&&(this.#$=s),this.#_||(this.#_=!0,this.#aa=this.#X,this.#ab=this.#Y,this.#ac=this.#Z,this.#ad=this.#$),this.#s.innerHTML="",this.#L=this.#G,this.layout.title.text&&(this.#L+=this.layout.title.style.fontSize+this.#J),this.#N=this.#U+this.#V+this.#W+this.#H,this.layout.yAxis.title.text&&(this.#N+=this.layout.yAxis.title.style.fontSize+this.#K),this.#M=this.#U+this.#V+this.layout.xAxis.tick.style.fontSize+this.#I,this.layout.xAxis.title.text&&(this.#M+=this.layout.xAxis.title.style.fontSize+this.#K);let o=this.#s.getBoundingClientRect();this.#u={height:o.height,width:o.width},this.#C=o.width-this.#N-this.#O,this.#D=o.height-this.#L-this.#M;let y=document.createElementNS("http://www.w3.org/2000/svg","clipPath");y.setAttribute("id",this.#v),this.#s.appendChild(y);let n=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n.setAttribute("x",this.#N),n.setAttribute("y",this.#L),n.setAttribute("width",this.#C),n.setAttribute("height",this.#D),n.setAttribute("stroke","transparent"),n.setAttribute("fill","none"),y.appendChild(n),this.#i=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#i.setAttribute("stroke",this.interactivity.zoomRect.stroke),this.#i.setAttribute("fill",this.interactivity.zoomRect.fill),this.#i.setAttribute("stroke-width",this.interactivity.zoomRect.strokeWidth),this.#i.setAttribute("stroke-dasharray",this.interactivity.zoomRect.strokeDashArray),this.#i.setAttribute("width",0),this.#i.setAttribute("height",0),this.#i.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#i),this.layout.xAxis.visible){let x=document.createElementNS("http://www.w3.org/2000/svg","line");x.setAttribute("stroke",this.layout.xAxis.style.stroke),x.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),x.setAttribute("shape-rendering","crispEdges"),x.setAttribute("x1",this.#N),x.setAttribute("y1",this.#L+this.#D),x.setAttribute("x2",this.#N+this.#C),x.setAttribute("y2",this.#L+this.#D),this.#s.appendChild(x)}if(this.layout.yAxis.visible){let u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("stroke",this.layout.yAxis.style.stroke),u.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),u.setAttribute("shape-rendering","crispEdges"),u.setAttribute("x1",this.#N),u.setAttribute("y1",this.#L),u.setAttribute("x2",this.#N),u.setAttribute("y2",this.#L+this.#D),this.#s.appendChild(u)}let d;if("auto"==this.layout.xAxis.tick.placement.toLowerCase()||this.layout.xAxis.tick.nbTicks<=1){let A=this.#C/(this.#Y-this.#X),b=this.#E/A;d=$enCharts.s(b);let c=Math.ceil(this.#X/d),g=Math.floor(this.#Y/d);for(let p=c;p<=g;p++)this.#ai(p*d)}else{d=(this.#Y-this.#X)/(this.layout.xAxis.tick.nbTicks-1);for(let f=0;f<this.layout.xAxis.tick.nbTicks;f++)this.#ai(this.#X+f*d)}this.#w=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#w.setAttribute("stroke",this.layout.xAxis.spy.lineStyle.stroke),this.#w.setAttribute("stroke-width",1),this.#w.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#w),this.#A=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#A.setAttribute("stroke",this.layout.xAxis.spy.rectStyle.stroke),this.#A.setAttribute("fill",this.layout.xAxis.spy.rectStyle.fill),this.#A.setAttribute("rx",this.layout.xAxis.spy.rectStyle.cornerRadius),this.#A.setAttribute("shape-rendering","geometricPrecision"),this.#A.setAttribute("width",0),this.#A.setAttribute("height",0),this.#s.appendChild(this.#A),this.#y=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#y.setAttribute("fill",this.layout.xAxis.spy.textStyle.color),this.#y.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),this.#y.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),this.#y.setAttribute("text-anchor","middle"),this.#y.setAttribute("y",this.#L+this.#D+this.#U+this.#V+this.layout.xAxis.tick.style.fontSize),this.#s.appendChild(this.#y);let S;if("auto"==this.layout.yAxis.tick.placement.toLowerCase()||this.layout.yAxis.tick.nbTicks<=1){let w=this.#D/(this.#$-this.#Z),k=this.#F/w;S=$enCharts.s(k);let m=Math.ceil(this.#Z/S),v=Math.floor(this.#$/S);for(let $=m;$<=v;$++)this.#aj($*S)}else{S=(this.#$-this.#Z)/(this.layout.yAxis.tick.nbTicks-1);for(let C=0;C<this.layout.yAxis.tick.nbTicks;C++)this.#aj(this.#Z+C*S)}if(this.#x=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#x.setAttribute("stroke",this.layout.yAxis.spy.lineStyle.stroke),this.#x.setAttribute("stroke-width",1),this.#x.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#x),this.#B=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#B.setAttribute("stroke",this.layout.yAxis.spy.rectStyle.stroke),this.#B.setAttribute("fill",this.layout.yAxis.spy.rectStyle.fill),this.#B.setAttribute("rx",this.layout.yAxis.spy.rectStyle.cornerRadius),this.#B.setAttribute("shape-rendering","geometricPrecision"),this.#B.setAttribute("width",0),this.#B.setAttribute("height",0),this.#s.appendChild(this.#B),this.#z=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#z.setAttribute("fill",this.layout.yAxis.spy.textStyle.color),this.#z.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),this.#z.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),this.#z.setAttribute("text-anchor","end"),this.#z.setAttribute("x",this.#N-this.#U-this.#V),this.#s.appendChild(this.#z),this.#o.y.forEach((t,e)=>{let i="";for(let s=0;s<this.#t.length;s++){let r=this.#ak(this.#t[s].x),l=this.#al(t.data[s+h]);this.#t[s].nx=r,i+=r+","+l+" "}let a=document.createElementNS("http://www.w3.org/2000/svg","polyline");a.setAttribute("points",i.trim()),a.setAttribute("fill","none"),a.setAttribute("stroke",t.style.stroke),a.setAttribute("stroke-dasharray",t.style.strokeDashArray),a.setAttribute("stroke-width",t.style.strokeWidth),a.setAttribute("stroke-linejoin","round"),a.setAttribute("shape-rendering","geometricPrecision"),a.setAttribute("clip-path","url(#"+this.#v+")"),this.#s.appendChild(a),t.name||(t.name="Series "+e)}),this.#o.y.length>0&&this.layout.legend.position){let _=document.createElementNS("http://www.w3.org/2000/svg","svg"),z=document.createElementNS("http://www.w3.org/2000/svg","rect");z.setAttribute("stroke",this.layout.legend.rectStyle.stroke),z.setAttribute("stroke-width",this.layout.legend.rectStyle.strokeWidth),z.setAttribute("stroke-dasharray",this.layout.legend.rectStyle.strokeDashArray),z.setAttribute("fill",this.layout.legend.rectStyle.fill),z.setAttribute("rx",this.layout.legend.rectStyle.cornerRadius),_.appendChild(z);let M=0;this.#o.y.forEach(t=>{let e=document.createElementNS("http://www.w3.org/2000/svg","line"),i=this.#R+this.layout.legend.textStyle.fontSize/2+M*(this.layout.legend.textStyle.fontSize+this.#R);e.setAttribute("x1",this.layout.legend.rectStyle.strokeWidth+this.#R),e.setAttribute("x2",this.layout.legend.rectStyle.strokeWidth+this.#R+this.#S),e.setAttribute("y1",i),e.setAttribute("y2",i),e.setAttribute("stroke",t.style.stroke),e.setAttribute("stroke-dasharray",t.style.strokeDashArray),e.setAttribute("stroke-width",t.style.strokeWidth),_.appendChild(e);let s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("font-size",this.layout.legend.textStyle.fontSize),s.setAttribute("font-family",this.layout.legend.textStyle.fontFamily),s.setAttribute("font-weight",this.layout.legend.textStyle.fontWeight),s.setAttribute("fill",this.layout.legend.textStyle.color),s.setAttribute("x",this.layout.legend.rectStyle.strokeWidth+2*this.#R+this.#S),s.setAttribute("y",i+this.layout.legend.textStyle.fontSize/2),s.setAttribute("text-anchor","start"),s.textContent=t.name,_.appendChild(s),M++}),this.#s.appendChild(_);let L=_.getBBox();_.setAttribute("width",L.width+this.layout.legend.rectStyle.strokeWidth+3*this.#R+"px"),_.setAttribute("height",L.height+this.layout.legend.rectStyle.strokeWidth+this.#R+"px"),z.setAttribute("x",this.layout.legend.rectStyle.strokeWidth/2),z.setAttribute("y",this.layout.legend.rectStyle.strokeWidth/2),z.setAttribute("height",L.height+this.#R),z.setAttribute("width",L.width+3*this.#R);let R=_.getBoundingClientRect();switch(this.layout.legend.position.toLowerCase()){case"east":_.setAttribute("x",this.#N+this.#C-this.#Q-R.width),_.setAttribute("y",this.#L+(this.#D-R.height)/2);break;case"west":_.setAttribute("x",this.#N+this.#Q),_.setAttribute("y",this.#L+(this.#D-R.height)/2);break;case"north":_.setAttribute("x",this.#N+(this.#C-R.width)/2),_.setAttribute("y",this.#L+this.#Q);break;case"northeast":_.setAttribute("x",this.#N+this.#C-this.#Q-R.width),_.setAttribute("y",this.#L+this.#Q);break;case"northwest":_.setAttribute("x",this.#N+this.#Q),_.setAttribute("y",this.#L+this.#Q);break;case"southeast":_.setAttribute("x",this.#N+this.#C-this.#Q-R.width),_.setAttribute("y",this.#L+this.#D-this.#Q-R.height);break;case"southwest":_.setAttribute("x",this.#N+this.#Q),_.setAttribute("y",this.#L+this.#D-this.#Q-R.height);break;default:_.setAttribute("x",this.#N+(this.#C-R.width)/2),_.setAttribute("y",this.#L+this.#D-this.#Q-R.height)}}if(this.layout.title.text){let O=document.createElementNS("http://www.w3.org/2000/svg","text");O.setAttribute("font-size",this.layout.title.style.fontSize),O.setAttribute("font-family",this.layout.title.style.fontFamily),O.setAttribute("font-weight",this.layout.title.style.fontWeight),O.setAttribute("fill",this.layout.title.style.color),O.setAttribute("x",this.#N+this.#C/2),O.setAttribute("y",this.layout.title.style.fontSize+this.#G),O.setAttribute("text-anchor","middle"),O.textContent=this.layout.title.text,this.#s.appendChild(O)}if(this.layout.xAxis.title.text){let E=document.createElementNS("http://www.w3.org/2000/svg","text");E.setAttribute("font-size",this.layout.xAxis.title.style.fontSize),E.setAttribute("font-family",this.layout.xAxis.title.style.fontFamily),E.setAttribute("font-weight",this.layout.xAxis.title.style.fontWeight),E.setAttribute("fill",this.layout.xAxis.title.style.color),E.setAttribute("x",this.#N+this.#C/2),E.setAttribute("y",this.#L+this.#D+this.#U+this.#V+this.layout.xAxis.tick.style.fontSize+this.#V+this.layout.xAxis.title.style.fontSize),E.setAttribute("text-anchor","middle"),E.textContent=this.layout.xAxis.title.text,this.#s.appendChild(E)}if(this.layout.yAxis.title.text){let W=document.createElementNS("http://www.w3.org/2000/svg","text");W.setAttribute("font-size",this.layout.yAxis.title.style.fontSize),W.setAttribute("font-family",this.layout.yAxis.title.style.fontFamily),W.setAttribute("font-weight",this.layout.yAxis.title.style.fontWeight),W.setAttribute("fill",this.layout.yAxis.title.style.color),W.setAttribute("text-anchor","start"),W.textContent=this.layout.yAxis.title.text,this.#s.appendChild(W);let N=W.getBoundingClientRect(),H=this.layout.xAxis.title.style.fontSize+3,P=this.#L+this.#D/2+N.width/2;W.setAttribute("x",H),W.setAttribute("y",P),W.setAttribute("transform","rotate(-90,"+H+","+P+")")}}#am(t,e){return new $enCharts.Point((t-this.#X)*this.#C/(this.#Y-this.#X)+this.#N,this.#D-(e-this.#Z)*this.#D/(this.#$-this.#Z)+this.#L)}#ak(i){return(i-this.#X)*this.#C/(this.#Y-this.#X)+this.#N}#al(s){return this.#D-(s-this.#Z)*this.#D/(this.#$-this.#Z)+this.#L}#ai(h){let r=this.#am(h,this.#Z),l=this.#am(h,this.#$);if(this.layout.xAxis.visible){let a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("stroke",this.layout.xAxis.style.stroke),a.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),a.setAttribute("x1",r.x),a.setAttribute("y1",r.y),a.setAttribute("x2",r.x),a.setAttribute("y2",r.y+this.#U),a.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(a)}let o=document.createElementNS("http://www.w3.org/2000/svg","text");if(o.setAttribute("fill",this.layout.xAxis.tick.style.color),o.setAttribute("x",r.x),o.setAttribute("y",r.y+this.#U+this.#V+this.layout.xAxis.tick.style.fontSize),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),o.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),o.textContent=this.layout.xAxis.tick.text(h),this.#s.appendChild(o),this.layout.xAxis.grid.visible&&h!=this.#X&&h!=this.#Y){let y=document.createElementNS("http://www.w3.org/2000/svg","line");y.setAttribute("stroke",this.layout.xAxis.grid.style.stroke),y.setAttribute("stroke-width",this.layout.xAxis.grid.style.strokeWidth),y.setAttribute("stroke-dasharray",this.layout.xAxis.grid.style.strokeDashArray),y.setAttribute("x1",r.x),y.setAttribute("y1",r.y),y.setAttribute("x2",l.x),y.setAttribute("y2",l.y),y.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(y)}}#aj(n){let x=this.#am(this.#X,n),u=this.#am(this.#Y,n);if(this.layout.yAxis.visible){let d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("stroke",this.layout.yAxis.style.stroke),d.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),d.setAttribute("x1",x.x),d.setAttribute("y1",x.y),d.setAttribute("x2",x.x-this.#U),d.setAttribute("y2",x.y),d.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(d)}let A=document.createElementNS("http://www.w3.org/2000/svg","text");if(A.setAttribute("fill",this.layout.yAxis.tick.style.color),A.setAttribute("x",x.x-this.#U-this.#V),A.setAttribute("y",x.y+this.layout.yAxis.tick.style.fontSize/2),A.setAttribute("text-anchor","end"),A.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),A.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),A.textContent=this.layout.yAxis.tick.text(n),this.#s.appendChild(A),this.layout.yAxis.grid.visible&&n!=this.#Z&&n!=this.#$){let b=document.createElementNS("http://www.w3.org/2000/svg","line");b.setAttribute("stroke",this.layout.yAxis.grid.style.stroke),b.setAttribute("stroke-width",this.layout.yAxis.grid.style.strokeWidth),b.setAttribute("stroke-dasharray",this.layout.yAxis.grid.style.strokeDashArray),b.setAttribute("x1",x.x),b.setAttribute("y1",x.y),b.setAttribute("x2",u.x),b.setAttribute("y2",u.y),b.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(b)}}}class StockChart{data=[];#p=new $enCharts.Layout;get layout(){return this.#p}set layout(t){t.title&&(this.#p.title=t.title),t.xAxis&&(this.#p.xAxis=t.xAxis),t.yAxis&&(this.#p.yAxis=t.yAxis)}#q=new $enCharts.Interactivity;get interactivity(){return this.#q}set interactivity(t){if(t.panningSpeed){let e=parseInt(t.panningSpeed);isNaN(e)||(e>5&&(e=5),e<1&&(e=1),this.#q.panningSpeed=e)}t.zoomRect&&(this.#q.zoomRect=t.zoomRect)}#r="transparent";get backgroundColor(){return this.#r}set backgroundColor(t){this.#r=t,this.#s.style.backgroundColor=t}chartType="line";#t=[];#s=document.createElementNS("http://www.w3.org/2000/svg","svg");#u;#w;#x;#y;#z;#A;#B;#i;#C;#D;#E=100;#F=100;#G=5;#H=3;#I=5;#J=5;#K=5;#L;#M;#N;#O=30;#P=.025;#U=5;#V=2;#W=50;#X;#Y;#Z;#$;#_=!1;#aa;#ab;#ae=!1;#af=!1;#ag=0;#ah=0;constructor(t){this.#s.setAttribute("height","100%"),this.#s.setAttribute("width","100%"),this.#s.style["user-select"]="none",t.appendChild(this.#s),window.addEventListener("resize",t=>{let e=this.#s.getBoundingClientRect();this.#u&&(e.width!==this.#u.width||e.height!==this.#u.height)&&this.plot(this.#X,this.#Y)}),this.#s.onmouseleave=t=>{this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.onmousedown=t=>{if(0==t.button){let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;i!=this.#ag||s!=this.#ah?(this.#ae=!0,this.#af=!1):(this.#af=!0,this.#ae=!1),i<this.#N?this.#ag=this.#N:i>this.#N+this.#C?this.#ag=this.#N+this.#C:this.#ag=i,s<this.#L?this.#ah=this.#L:s>this.#L+this.#D?this.#ah=this.#L+this.#D:this.#ah=s}},this.#s.onmouseup=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset;if(this.#ae){this.#ae=!1;let s=this.#t.findIndex(t=>t.nx>=i),h=this.#t.findIndex(t=>t.nx>=this.#ag);s<h?this.plot(this.#X+s,this.#X+h-1):this.plot(this.#X+h,this.#X+s-1),this.#i.removeAttribute("x"),this.#i.removeAttribute("y"),this.#i.removeAttribute("width"),this.#i.removeAttribute("height")}this.#af&&(this.#af=!1)},this.#s.onmousemove=t=>{let e=this.#s.getBoundingClientRect(),i=t.pageX-e.left-window.pageXOffset,s=t.pageY-e.top-window.pageYOffset;if(i>=this.#N&&i<=this.#C+this.#N&&s>=this.#L&&s<=this.#D+this.#L){if(this.layout.xAxis.spy.visible&&this.#t.length>0){let h=this.#t.findIndex(t=>t.nx>i);-1==h&&(h=this.#t.length-1),0==h&&(h=1);let r=1==this.#t.length?this.#t[0]:i>(this.#t[h].nx+this.#t[h-1].nx)/2?this.#t[h]:this.#t[h-1];this.#w.setAttribute("y1",this.#D+this.#L),this.#w.setAttribute("y2",this.#L),this.#w.setAttribute("x1",r.nx),this.#w.setAttribute("x2",r.nx),this.#y.setAttribute("x",r.nx),this.#y.textContent=this.layout.xAxis.tick.text(r.Date);let l=this.#y.getBoundingClientRect();this.#A.setAttribute("x",l.left-e.left),this.#A.setAttribute("y",l.top-e.top),this.#A.setAttribute("width",l.width),this.#A.setAttribute("height",l.height)}if(this.layout.yAxis.spy.visible){this.#x.setAttribute("x1",this.#N),this.#x.setAttribute("y1",s),this.#x.setAttribute("x2",this.#N+this.#C),this.#x.setAttribute("y2",s);let a=(this.#D-(s-this.#L))*(this.#$-this.#Z)/this.#D+this.#Z;this.#z.setAttribute("y",s+this.layout.yAxis.tick.style.fontSize/2),this.#z.textContent=this.layout.yAxis.tick.text(a);let o=this.#z.getBoundingClientRect();this.#B.setAttribute("x",o.left-e.left),this.#B.setAttribute("y",o.top-e.top),this.#B.setAttribute("width",o.width),this.#B.setAttribute("height",o.height)}if(this.#ae&&(i>this.#ag?(this.#i.setAttribute("x",this.#ag),this.#i.setAttribute("width",i-this.#ag)):(this.#i.setAttribute("x",i),this.#i.setAttribute("width",this.#ag-i)),this.#i.setAttribute("y",this.#L),this.#i.setAttribute("height",this.#D)),this.#af){let y=this.#t.findIndex(t=>t.nx>=Math.abs(i-this.#ag)*this.interactivity.panningSpeed/10+this.#N);y>0&&(i>this.#ag?this.plot(this.#X-y,this.#Y-y):this.plot(this.#X+y,this.#Y+y))}}else this.layout.xAxis.spy.visible&&(this.#w.removeAttribute("x1"),this.#w.removeAttribute("y1"),this.#w.removeAttribute("x2"),this.#w.removeAttribute("y2"),this.#y.removeAttribute("x"),this.#y.textContent="",this.#A.removeAttribute("x"),this.#A.removeAttribute("y"),this.#A.removeAttribute("width"),this.#A.removeAttribute("height")),this.layout.yAxis.spy.visible&&(this.#x.removeAttribute("x1"),this.#x.removeAttribute("y1"),this.#x.removeAttribute("x2"),this.#x.removeAttribute("y2"),this.#z.removeAttribute("y"),this.#z.textContent="",this.#B.removeAttribute("x"),this.#B.removeAttribute("y"),this.#B.removeAttribute("width"),this.#B.removeAttribute("height"))},this.#s.ondblclick=t=>{this.plot(this.#aa,this.#ab)}}plot(t,e){if(e<=t||0==this.data.length||t<0||e>this.data.length-1)return;this.#X=0,this.#Y=this.data.length-1,arguments.length>=1&&(this.#X=t),0==this.#X&&"candlestickctc"==this.chartType.toLowerCase()&&(this.#X=1),arguments.length>=2&&(this.#Y=e),this.#Y==this.data.length-1?this.#t=this.data.slice(this.#X):this.#t=this.data.slice(this.#X,this.#Y+1),"line"==this.chartType.toLowerCase()?(this.#Z=Math.floor(this.#t.reduce((t,e)=>t.Close<e.Close?t:e).Close*(1-this.#P)),this.#$=Math.ceil(this.#t.reduce((t,e)=>t.Close>e.Close?t:e).Close*(1+this.#P))):(this.#Z=Math.floor(this.#t.reduce((t,e)=>t.Low<e.Low?t:e).Low*(1-this.#P)),this.#$=Math.ceil(this.#t.reduce((t,e)=>t.High>e.High?t:e).High*(1+this.#P))),this.#_||(this.#_=!0,this.#aa=this.#X,this.#ab=this.#Y),this.#s.innerHTML="",this.#L=this.#G,this.layout.title.text&&(this.#L+=this.layout.title.style.fontSize+this.#J),this.#N=this.#U+this.#V+this.#W+this.#H,this.layout.yAxis.title.text&&(this.#N+=this.layout.yAxis.title.style.fontSize+this.#K),this.#M=this.#U+this.#V+this.layout.xAxis.tick.style.fontSize+this.#I,this.layout.xAxis.title.text&&(this.#M+=this.layout.xAxis.title.style.fontSize+this.#K);let i=this.#s.getBoundingClientRect();if(this.#u={height:i.height,width:i.width},this.#C=i.width-this.#N-this.#O,this.#D=i.height-this.#L-this.#M,this.#i=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#i.setAttribute("stroke",this.interactivity.zoomRect.stroke),this.#i.setAttribute("fill",this.interactivity.zoomRect.fill),this.#i.setAttribute("stroke-width",this.interactivity.zoomRect.strokeWidth),this.#i.setAttribute("stroke-dasharray",this.interactivity.zoomRect.strokeDashArray),this.#i.setAttribute("width",0),this.#i.setAttribute("height",0),this.#i.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#i),this.layout.xAxis.visible){let s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("stroke",this.layout.xAxis.style.stroke),s.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),s.setAttribute("shape-rendering","crispEdges"),s.setAttribute("x1",this.#N),s.setAttribute("y1",this.#L+this.#D),s.setAttribute("x2",this.#N+this.#C),s.setAttribute("y2",this.#L+this.#D),this.#s.appendChild(s)}if(this.layout.yAxis.visible){let h=document.createElementNS("http://www.w3.org/2000/svg","line");h.setAttribute("stroke",this.layout.yAxis.style.stroke),h.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),h.setAttribute("shape-rendering","crispEdges"),h.setAttribute("x1",this.#N),h.setAttribute("y1",this.#L),h.setAttribute("x2",this.#N),h.setAttribute("y2",this.#L+this.#D),this.#s.appendChild(h)}let r;if("auto"==this.layout.xAxis.tick.placement.toLowerCase()||this.layout.xAxis.tick.nbTicks<=1){let l=this.#C/(this.#Y-this.#X),a=this.#E/l;r=$enCharts.s(a);let o=Math.ceil(this.#X/r),y=Math.floor(this.#Y/r);for(let n=o;n<=y;n++)this.#ai(Math.floor(n*r))}else{r=(this.#Y-this.#X)/(this.layout.xAxis.tick.nbTicks-1);for(let x=0;x<this.layout.xAxis.tick.nbTicks;x++)this.#ai(this.#X+Math.floor(x*r))}this.#w=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#w.setAttribute("stroke",this.layout.xAxis.spy.lineStyle.stroke),this.#w.setAttribute("stroke-width",1),this.#w.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#w),this.#A=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#A.setAttribute("stroke",this.layout.xAxis.spy.rectStyle.stroke),this.#A.setAttribute("fill",this.layout.xAxis.spy.rectStyle.fill),this.#A.setAttribute("rx",this.layout.xAxis.spy.rectStyle.cornerRadius),this.#A.setAttribute("shape-rendering","geometricPrecision"),this.#A.setAttribute("width",0),this.#A.setAttribute("height",0),this.#s.appendChild(this.#A),this.#y=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#y.setAttribute("fill",this.layout.xAxis.spy.textStyle.color),this.#y.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),this.#y.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),this.#y.setAttribute("text-anchor","middle"),this.#y.setAttribute("y",this.#L+this.#D+this.#U+this.#V+this.layout.xAxis.tick.style.fontSize),this.#s.appendChild(this.#y);let u;if("auto"==this.layout.yAxis.tick.placement.toLowerCase()||this.layout.yAxis.tick.nbTicks<=1){let d=this.#D/(this.#$-this.#Z),A=this.#F/d;u=$enCharts.s(A);let b=Math.ceil(this.#Z/u),c=Math.floor(this.#$/u);for(let g=b;g<=c;g++)this.#aj(Math.floor(g*u))}else{u=(this.#$-this.#Z)/(this.layout.yAxis.tick.nbTicks-1);for(let p=0;p<this.layout.yAxis.tick.nbTicks;p++)this.#aj(this.#Z+Math.floor(p*u))}if(this.#x=document.createElementNS("http://www.w3.org/2000/svg","line"),this.#x.setAttribute("stroke",this.layout.yAxis.spy.lineStyle.stroke),this.#x.setAttribute("stroke-width",1),this.#x.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(this.#x),this.#B=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.#B.setAttribute("stroke",this.layout.yAxis.spy.rectStyle.stroke),this.#B.setAttribute("fill",this.layout.yAxis.spy.rectStyle.fill),this.#B.setAttribute("rx",this.layout.yAxis.spy.rectStyle.cornerRadius),this.#B.setAttribute("shape-rendering","geometricPrecision"),this.#B.setAttribute("width",0),this.#B.setAttribute("height",0),this.#s.appendChild(this.#B),this.#z=document.createElementNS("http://www.w3.org/2000/svg","text"),this.#z.setAttribute("fill",this.layout.yAxis.spy.textStyle.color),this.#z.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),this.#z.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),this.#z.setAttribute("text-anchor","end"),this.#z.setAttribute("x",this.#N-this.#U-this.#V),this.#s.appendChild(this.#z),"line"==this.chartType.toLowerCase()){let f="";for(let S=this.#X;S<=this.#Y;S++){let w=this.#am(S,this.data[S].Close);this.#t[S-this.#X].nx=w.x,f+=w.x+","+w.y+" "}let k=document.createElementNS("http://www.w3.org/2000/svg","polyline");k.setAttribute("points",f.trim()),k.setAttribute("fill","none"),k.setAttribute("stroke","black"),k.setAttribute("stroke-width",2),k.setAttribute("stroke-linejoin","round"),k.setAttribute("shape-rendering","geometricPrecision"),this.#s.appendChild(k)}else if("hilo"==this.chartType.toLowerCase())for(let m=this.#X;m<=this.#Y;m++){let v=this.#am(m,this.data[m].Low),$=this.#am(m,this.data[m].High),C=document.createElementNS("http://www.w3.org/2000/svg","line");C.setAttribute("x1",v.x),C.setAttribute("y1",v.y),C.setAttribute("x2",$.x),C.setAttribute("y2",$.y),C.setAttribute("stroke","black"),C.setAttribute("stroke-width",2),C.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(C),this.#t[m-this.#X].nx=v.x}else if("ohlc"==this.chartType.toLowerCase())for(let _=this.#X;_<=this.#Y;_++){let z="black";this.data[_].Open>this.data[_].Close&&(z="red"),this.data[_].Open<this.data[_].Close&&(z="green");let M=this.#am(_,this.data[_].Low),L=this.#am(_,this.data[_].High),R=document.createElementNS("http://www.w3.org/2000/svg","line");R.setAttribute("x1",M.x),R.setAttribute("y1",M.y),R.setAttribute("x2",L.x),R.setAttribute("y2",L.y),R.setAttribute("stroke",z),R.setAttribute("stroke-width",2),R.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(R);let O=this.#am(_,this.data[_].Open),E=document.createElementNS("http://www.w3.org/2000/svg","line");E.setAttribute("x1",O.x),E.setAttribute("y1",O.y),E.setAttribute("x2",O.x-3),E.setAttribute("y2",O.y),E.setAttribute("stroke",z),E.setAttribute("stroke-width",2),E.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(E);let W=this.#am(_,this.data[_].Close),N=document.createElementNS("http://www.w3.org/2000/svg","line");N.setAttribute("x1",W.x),N.setAttribute("y1",W.y),N.setAttribute("x2",W.x+3),N.setAttribute("y2",W.y),N.setAttribute("stroke",z),N.setAttribute("stroke-width",2),N.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(N),this.#t[_-this.#X].nx=W.x}else if("candlestickotc"==this.chartType.toLowerCase())for(let H=this.#X;H<=this.#Y;H++){let P=this.#am(H,this.data[H].Low),X=this.#am(H,this.data[H].High),V=this.#am(H,this.data[H].Open),T=this.#am(H,this.data[H].Close);if(this.data[H].Open>this.data[H].Close){let D=document.createElementNS("http://www.w3.org/2000/svg","rect");D.setAttribute("x",V.x-2),D.setAttribute("y",V.y),D.setAttribute("width",4),D.setAttribute("height",T.y-V.y),D.setAttribute("stroke","red"),D.setAttribute("fill","red"),D.setAttribute("stroke-width",1),D.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(D);let Y=document.createElementNS("http://www.w3.org/2000/svg","line");Y.setAttribute("x1",X.x),Y.setAttribute("y1",X.y),Y.setAttribute("x2",V.x),Y.setAttribute("y2",V.y),Y.setAttribute("stroke","red"),Y.setAttribute("stroke-width",1),Y.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(Y);let F=document.createElementNS("http://www.w3.org/2000/svg","line");F.setAttribute("x1",P.x),F.setAttribute("y1",P.y),F.setAttribute("x2",T.x),F.setAttribute("y2",T.y),F.setAttribute("stroke","red"),F.setAttribute("stroke-width",1),F.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(F)}else if(this.data[H].Open<this.data[H].Close){let B=document.createElementNS("http://www.w3.org/2000/svg","rect");B.setAttribute("x",T.x-2),B.setAttribute("y",T.y),B.setAttribute("width",4),B.setAttribute("height",V.y-T.y),B.setAttribute("fill","green"),B.setAttribute("stroke","green"),B.setAttribute("stroke-width",1),B.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(B);let I=document.createElementNS("http://www.w3.org/2000/svg","line");I.setAttribute("x1",X.x),I.setAttribute("y1",X.y),I.setAttribute("x2",T.x),I.setAttribute("y2",T.y),I.setAttribute("stroke","green"),I.setAttribute("stroke-width",1),I.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(I);let j=document.createElementNS("http://www.w3.org/2000/svg","line");j.setAttribute("x1",P.x),j.setAttribute("y1",P.y),j.setAttribute("x2",V.x),j.setAttribute("y2",V.y),j.setAttribute("stroke","green"),j.setAttribute("stroke-width",1),j.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(j)}else{let G=document.createElementNS("http://www.w3.org/2000/svg","line");G.setAttribute("x1",P.x),G.setAttribute("y1",P.y),G.setAttribute("x2",X.x),G.setAttribute("y2",X.y),G.setAttribute("stroke","black"),G.setAttribute("stroke-width",1),G.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(G);let U=document.createElementNS("http://www.w3.org/2000/svg","line");U.setAttribute("x1",V.x-2),U.setAttribute("y1",V.y),U.setAttribute("x2",T.x+2),U.setAttribute("y2",T.y),U.setAttribute("stroke","black"),U.setAttribute("stroke-width",1),U.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(U)}this.#t[H-this.#X].nx=T.x}else if("candlestickctc"!=this.chartType.toLowerCase())return;else if(this.data.length>=2)for(let q=this.#X;q<=this.#Y;q++){let J=this.#am(q,this.data[q].Low),K=this.#am(q,this.data[q].High),Q=this.#am(q,this.data[q-1].Close),Z=this.#am(q,this.data[q].Close);if(this.data[q-1].Close>this.data[q].Close){let tt=document.createElementNS("http://www.w3.org/2000/svg","rect");tt.setAttribute("x",Q.x-2),tt.setAttribute("y",Q.y),tt.setAttribute("width",4),tt.setAttribute("height",Z.y-Q.y),tt.setAttribute("stroke","red"),tt.setAttribute("fill","red"),tt.setAttribute("stroke-width",1),tt.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tt);let te=document.createElementNS("http://www.w3.org/2000/svg","line");te.setAttribute("x1",K.x),te.setAttribute("y1",K.y),te.setAttribute("x2",Q.x),te.setAttribute("y2",Q.y),te.setAttribute("stroke","red"),te.setAttribute("stroke-width",1),te.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(te);let ti=document.createElementNS("http://www.w3.org/2000/svg","line");ti.setAttribute("x1",J.x),ti.setAttribute("y1",J.y),ti.setAttribute("x2",Z.x),ti.setAttribute("y2",Z.y),ti.setAttribute("stroke","red"),ti.setAttribute("stroke-width",1),ti.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(ti)}else if(this.data[q-1].Close<this.data[q].Close){let ts=document.createElementNS("http://www.w3.org/2000/svg","rect");ts.setAttribute("x",Z.x-2),ts.setAttribute("y",Z.y),ts.setAttribute("width",4),ts.setAttribute("height",Q.y-Z.y),ts.setAttribute("fill","green"),ts.setAttribute("stroke","green"),ts.setAttribute("stroke-width",1),ts.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(ts);let th=document.createElementNS("http://www.w3.org/2000/svg","line");th.setAttribute("x1",K.x),th.setAttribute("y1",K.y),th.setAttribute("x2",Z.x),th.setAttribute("y2",Z.y),th.setAttribute("stroke","green"),th.setAttribute("stroke-width",1),th.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(th);let tr=document.createElementNS("http://www.w3.org/2000/svg","line");tr.setAttribute("x1",J.x),tr.setAttribute("y1",J.y),tr.setAttribute("x2",Q.x),tr.setAttribute("y2",Q.y),tr.setAttribute("stroke","green"),tr.setAttribute("stroke-width",1),tr.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tr)}else{let tl=document.createElementNS("http://www.w3.org/2000/svg","line");tl.setAttribute("x1",J.x),tl.setAttribute("y1",J.y),tl.setAttribute("x2",K.x),tl.setAttribute("y2",K.y),tl.setAttribute("stroke","black"),tl.setAttribute("stroke-width",1),tl.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(tl);let ta=document.createElementNS("http://www.w3.org/2000/svg","line");ta.setAttribute("x1",Q.x-2),ta.setAttribute("y1",Q.y),ta.setAttribute("x2",Z.x+2),ta.setAttribute("y2",Z.y),ta.setAttribute("stroke","black"),ta.setAttribute("stroke-width",1),ta.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(ta)}this.#t[q-this.#X].nx=Z.x}if(this.layout.title.text){let to=document.createElementNS("http://www.w3.org/2000/svg","text");to.setAttribute("font-size",this.layout.title.style.fontSize),to.setAttribute("font-family",this.layout.title.style.fontFamily),to.setAttribute("font-weight",this.layout.title.style.fontWeight),to.setAttribute("fill",this.layout.title.style.color),to.setAttribute("x",this.#N+this.#C/2),to.setAttribute("y",this.layout.title.style.fontSize+this.#G),to.setAttribute("text-anchor","middle"),to.textContent=this.layout.title.text,this.#s.appendChild(to)}if(this.layout.xAxis.title.text){let ty=document.createElementNS("http://www.w3.org/2000/svg","text");ty.setAttribute("font-size",this.layout.xAxis.title.style.fontSize),ty.setAttribute("font-family",this.layout.xAxis.title.style.fontFamily),ty.setAttribute("font-weight",this.layout.xAxis.title.style.fontWeight),ty.setAttribute("fill",this.layout.xAxis.title.style.color),ty.setAttribute("x",this.#N+this.#C/2),ty.setAttribute("y",this.#L+this.#D+this.#U+this.#V+this.layout.xAxis.tick.style.fontSize+this.#V+this.layout.xAxis.title.style.fontSize),ty.setAttribute("text-anchor","middle"),ty.textContent=this.layout.xAxis.title.text,this.#s.appendChild(ty)}if(this.layout.yAxis.title.text){let tn=document.createElementNS("http://www.w3.org/2000/svg","text");tn.setAttribute("font-size",this.layout.yAxis.title.style.fontSize),tn.setAttribute("font-family",this.layout.yAxis.title.style.fontFamily),tn.setAttribute("font-weight",this.layout.yAxis.title.style.fontWeight),tn.setAttribute("fill",this.layout.yAxis.title.style.color),tn.setAttribute("text-anchor","start"),tn.textContent=this.layout.yAxis.title.text,this.#s.appendChild(tn);let tx=tn.getBoundingClientRect(),tu=this.layout.xAxis.title.style.fontSize+3,td=this.#L+this.#D/2+tx.width/2;tn.setAttribute("x",tu),tn.setAttribute("y",td),tn.setAttribute("transform","rotate(-90,"+tu+","+td+")")}}#am(c,g){return new $enCharts.Point((c-this.#X)*this.#C/(this.#Y-this.#X)+this.#N,this.#D-(g-this.#Z)*this.#D/(this.#$-this.#Z)+this.#L)}#ai(p){let f=this.#am(p,this.#Z),S=this.#am(p,this.#$);if(this.layout.xAxis.visible){let w=document.createElementNS("http://www.w3.org/2000/svg","line");w.setAttribute("stroke",this.layout.xAxis.style.stroke),w.setAttribute("stroke-width",this.layout.xAxis.style.strokeWidth),w.setAttribute("x1",f.x),w.setAttribute("y1",f.y),w.setAttribute("x2",f.x),w.setAttribute("y2",f.y+this.#U),w.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(w)}let k=document.createElementNS("http://www.w3.org/2000/svg","text");if(k.setAttribute("fill",this.layout.xAxis.tick.style.color),k.setAttribute("x",f.x),k.setAttribute("y",f.y+this.#U+this.#V+this.layout.xAxis.tick.style.fontSize),k.setAttribute("text-anchor","middle"),k.setAttribute("font-size",this.layout.xAxis.tick.style.fontSize),k.setAttribute("font-family",this.layout.xAxis.tick.style.fontFamily),k.textContent=this.layout.xAxis.tick.text(this.#t[p-this.#X].Date),this.#s.appendChild(k),this.layout.xAxis.grid.visible&&p!=this.#X&&p!=this.#Y){let m=document.createElementNS("http://www.w3.org/2000/svg","line");m.setAttribute("stroke",this.layout.xAxis.grid.style.stroke),m.setAttribute("stroke-width",this.layout.xAxis.grid.style.strokeWidth),m.setAttribute("stroke-dasharray",this.layout.xAxis.grid.style.strokeDashArray),m.setAttribute("x1",f.x),m.setAttribute("y1",f.y),m.setAttribute("x2",S.x),m.setAttribute("y2",S.y),m.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(m)}}#aj(v){let $=this.#am(this.#X,v),C=this.#am(this.#Y,v);if(this.layout.yAxis.visible){let _=document.createElementNS("http://www.w3.org/2000/svg","line");_.setAttribute("stroke",this.layout.yAxis.style.stroke),_.setAttribute("stroke-width",this.layout.yAxis.style.strokeWidth),_.setAttribute("x1",$.x),_.setAttribute("y1",$.y),_.setAttribute("x2",$.x-this.#U),_.setAttribute("y2",$.y),_.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(_)}let z=document.createElementNS("http://www.w3.org/2000/svg","text");if(z.setAttribute("fill",this.layout.yAxis.tick.style.color),z.setAttribute("x",$.x-this.#U-this.#V),z.setAttribute("y",$.y+this.layout.yAxis.tick.style.fontSize/2),z.setAttribute("text-anchor","end"),z.setAttribute("font-size",this.layout.yAxis.tick.style.fontSize),z.setAttribute("font-family",this.layout.yAxis.tick.style.fontFamily),z.textContent=this.layout.yAxis.tick.text(v),this.#s.appendChild(z),this.layout.yAxis.grid.visible&&v!=this.#Z&&v!=this.#$){let M=document.createElementNS("http://www.w3.org/2000/svg","line");M.setAttribute("stroke",this.layout.yAxis.grid.style.stroke),M.setAttribute("stroke-width",this.layout.yAxis.grid.style.strokeWidth),M.setAttribute("stroke-dasharray",this.layout.yAxis.grid.style.strokeDashArray),M.setAttribute("x1",$.x),M.setAttribute("y1",$.y),M.setAttribute("x2",C.x),M.setAttribute("y2",C.y),M.setAttribute("shape-rendering","crispEdges"),this.#s.appendChild(M)}}}